DECLARE

  CURSOR C_CLASSE IS
    SELECT NM_CLASSE, COUNT(*)NR_PROD
	 FROM PRODUTO
	 GROUP BY NM_CLASSE
	;
	
  CURSOR C_PROD(PNM_CLASSE VARCHAR2) IS
    SELECT NM_PRO, CD_PRO
	 FROM PRODUTO
	 WHERE NM_CLASSE = PNM_CLASSE
    ;
	
  CURSOR C_ITV(PCD_PRO NUMBER) IS
    SELECT CD_LOJ, CD_VEN
	 FROM ITEM_VENDA
	 WHERE CD_PRO = PCD_PRO
    ;

BEGIN

  FOR WR_CLASSE IN C_CLASSE LOOP
  
    DBMS_OUTPUT.PUT_LINE('Classe: '||WR_CLASSE.NM_CLASSE||'  /   Qtd.: '||WR_CLASSE.NR_PROD);
	
	FOR WR_PROD IN C_PROD(WR_CLASSE.NM_CLASSE) LOOP
	
	  DBMS_OUTPUT.PUT_LINE('   '||WR_PROD.NM_PRO);
	  
	  FOR WR_ITV IN C_ITV(WR_PROD.CD_PRO) LOOP
	  
	    DBMS_OUTPUT.PUT_LINE('      Loja: '||WR_ITV.CD_LOJ||'  -  Venda: '||WR_ITV.CD_VEN);
	 
	  
	  END LOOP;
	  DBMS_OUTPUT.NEW_LINE();
	END LOOP;
    DBMS_OUTPUT.NEW_LINE();
  END LOOP;

END;