#include <16F877A.h>
#fuses XT, PROTECT
#use delay(clock=4MHz)
#use rs232(baud=9600,xmit=pin_c6,rcv=pin_c7)
#include <string.h>
#byte RCSTA=0x18 // #byte significa que vai mexer em um endereço na memória RAM


void main() {
   
   char c[10], *ptr; // é preciso declarar um ponteiro, pois em c, não é possível atribuir a modificação de uma string a ela mesma
   
   while(true) {
      printf("%u\r\n", RCSTA); //mostra o valor do endereço de memoria 0x18
      // para indicar que o programa está rodando
      output_bit(pin_b0,1);
      delay_ms(1000);
      output_bit(pin_b0,0);
      delay_ms(1000);
   
      if(kbhit()) {
         // CONVERTE UM CARACTER PARA CAIXA ALTA 
         // (O MESMO PODE SER FEITO PARA CAIXA BAIXA USANDO A FUNÇÃO tolower())
         /*c = getc();
         putc(c);
         putc(0xD0); // valor hexadecimal do [\n]
         putc(0x10); // valor hexadecimal do [\r]
         c = toupper(c);
         putc(c);
         putc(0xD0); // valor hexadecimal do [\n]
         putc(0x10); // valor hexadecimal do [\r]
         */
         
         // CONVERTE UMA STRING PARA CAIXA BAIXA
         // (TAMBÉM PODE-SE CONVERTER PARA CAIXA ALTA USANDO A FUNÇÃO str)
         gets(c);
         puts(c);
         ptr = strlwr(c); // converte uma string por inteiro para caixa baixa
         puts(ptr);
         strcpy(c, ptr); // copia o conteúdo de um ponteiro para o vetor de caracteres
         puts(c);
      }
      
      printf("%u\r\n", RCSTA);
      
   }
  
}


