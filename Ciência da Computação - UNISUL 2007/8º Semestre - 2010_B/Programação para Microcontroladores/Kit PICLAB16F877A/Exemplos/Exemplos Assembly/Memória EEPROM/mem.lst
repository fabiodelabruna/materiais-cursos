MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:48:15         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001 ;*      *       *       *       *       *       *       *       *       *
                      00002 ;*                                                                      *
                      00003 ;*          EXEMPLO3: UTILIZAÇÃO DA MEMÓRIA DE PROGRAMA DO PIC          *
                      00004 ;*                   APOSTILA MÓDULO B  -  PIC16F877A                   *
                      00005 ;*                    ÁPICE TECNOLOGIA E TREINAMENTO                    *
                      00006 ;*          VERSÃO 1.0                          DATA:03/05/2005         *
                      00007 ;*                                                                      *
                      00008 ;*      *       *       *       *       *       *       *       *       *
                      00009 
                      00010 ;*      *       *       *       *       *       *       *       *       *
                      00011 ;*                       OBJETIVO DO ARQUIVO FONTE                      *
                      00012 ;*                                                                      *
                      00013 ;*              DEMONSTRAR A UTILIZAÇÃO DA EEPROM DO PIC                *
                      00014 ;*                                                                      *
                      00015 ;*      *       *       *       *       *       *       *       *       *
                      00016 
                      00017  #INCLUDE <P16F877.INC>         ;ARQUIVO PADRÃO PARA PIC16F877A
                      00001         LIST
                      00002 ; P16F877.INC  Standard Header File, Version 1.00    Microchip Technology, Inc.
                      00373         LIST
2007   3F35           00018  __CONFIG _CP_OFF & _XT_OSC & _PWRTE_ON & _LVP_OFF & _WDT_ON & _BODEN_OFF & _CPD_OFF & _DEBUG_OFF
                      00019  ERRORLEVEL 2   
                      00020         ;NESTE PONTO É INFORMADO A CONFIGURAÇÃO DA MÁQUINA, OU SEJA, SE TERÁ
                      00021         ;CÓDIGO DE PROTEÇÃO OU O TIPO DE CRISTAL QUE SERÁ UTILIZADO     
                      00022 
                      00023         ;CONFIGURAÇÃO DA MÁQUINA
                      00024         ; CODE PROTECT                  -> DESLIGADO
                      00025         ; OSCILADOR                     -> CRISTAL OU RESSONADOR
                      00026         ; POWER-UP                      -> LIGADO
                      00027         ; DEBUF                         -> DESLIGADO            
                      00028         ; PROGRAMAÇÃO EM BAIXA VOLTAGEM -> DESLIGADO
                      00029         ; WATCH DOG                     -> LIGADO
                      00030         ; BROWN-OUT RESET               -> DESLIGADO
                      00031         ; PROTEÇÃO DE EEPROM            -> DESLIGADO
                      00032                 
                      00033 ;*      *       *       *       *       *       *       *       *       *
                      00034 ;*                         PAGINAÇÃO DE MEMÓRIA                         *
                      00035 ;*      *       *       *       *       *       *       *       *       *
                      00036 
                      00037 ; AQUI CRIAREMOS UM PSEUDÔNIMO PARA UM COMANDO. POR EXEMPLO, O COMANDO
                      00038 ; "BCF STATUS,RP0" PODE SER SUBSTITUÍDO SEM PROBLEMAS POR "BANK0". O 
                      00039 ; COMPILADOR IRÁ SUBSTITUIR INTERNAMENTE "BANK0" POR "BCF STATUS,RP0".
                      00040 ; ESTA APLICAÇÃO É VÁLIDA PARA OUTROS TIPOS DE COMANDOS
                      00041 
                      00042 #DEFINE BANK0   BCF     STATUS,RP0      ; ESCOLHE BANCO DE MEMÓRIA 0
                      00043 #DEFINE BANK1   BSF     STATUS,RP0      ; ESCOLHE BANCO DE MEMÓRIA 1
                      00044 
                      00045 ;*      *       *       *       *       *       *       *       *       *
                      00046 ;*                           DEFINICAO DE RAM                           *
                      00047 ;*      *       *       *       *       *       *       *       *       *
                      00048 
                      00049 ; AQUI IREMOS CRIAR AS VARIÁVEIS DO NOSSO SISTEMA
                      00050 
MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:48:15         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00051         CBLOCK 0x20      ; INÍCIO DO BLOCO DE RAM(GPR)
  00000020            00052                 TEMPO1   ; VARIÁVEL DA ROTINA DE TEMPO          
  00000021            00053                 TEMPO2   ; VARIÁVEL DA ROTINA DE TEMPO                          
  00000022            00054                 TECLADO1 ; VARIÁVEL PARA MARCAR AS TECLAS  
  00000023            00055                 TECLADO2 ; VARIÁVEL PARA MARCAR AS TECLAS
  00000024            00056                 INDICE   ; VARIÁVEL DE ÍNDICE
  00000025            00057                 TEMP     ; VARIÁVEL TEMPORÁRIA          
  00000026            00058                 BUFFER0  ; BUFFER PARA ARMAZENAR O BYTE
  00000027            00059                 BUFFER1  ; BUFFER PARA ARMAZENAR O BYTE
  00000028            00060                 BUFFER2  ; BUFFER PARA ARMAZENAR O BYTE
  00000029            00061                 BUFFER3  ; BUFFER PARA ARMAZENAR O BYTE
  0000002A            00062                 BUFFER4  ; BUFFER PARA ARMAZENAR O BYTE
  0000002B            00063                 BUFFER5  ; BUFFER PARA ARMAZENAR O BYTE
  0000002C            00064                 BUFFER6  ; BUFFER PARA ARMAZENAR O BYTE
  0000002D            00065                 BUFFER7  ; BUFFER PARA ARMAZENAR O BYTE
  0000002E            00066                 BUFFER8  ; BUFFER PARA ARMAZENAR O BYTE
  0000002F            00067                 BUFFER9  ; BUFFER PARA ARMAZENAR O BYTE
  00000030            00068                 BUFFER10 ; BUFFER PARA ARMAZENAR O BYTE
  00000031            00069                 BUFFER11 ; BUFFER PARA ARMAZENAR O BYTE
  00000032            00070                 BUFFER12 ; BUFFER PARA ARMAZENAR O BYTE
  00000033            00071                 BUFFER13 ; BUFFER PARA ARMAZENAR O BYTE
  00000034            00072                 BUFFER14 ; BUFFER PARA ARMAZENAR O BYTE
  00000035            00073                 BUFFER15 ; BUFFER PARA ARMAZENAR O BYTE
  00000036            00074                 INDICE_BUFFER ; INDICE PARA O BUFFER
                      00075                 
  00000037            00076                 ENDERECO_HI ; VARIÁVEIS PARA CONTROLE DO        
  00000038            00077                 ENDERECO_LO ; ENDEREÇO DA EEPROM E FLASH
  00000039            00078                 DADOS_HI    ; DADOS DE ESCRITA E LEITURA        
  0000003A            00079                 DADOS_LO    ; DA MEMÓRIA DE PROGRAMA E DADOS    
                      00080                 
                      00081         ENDC             ; FIM DO BLOCO DE RAM(GPR)
                      00082         
                      00083         CBLOCK 0x70
  00000070            00084                 W_TEMP   ; VARIÁVEIS TEMPORÁRIAS
  00000071            00085                 STATUS_TEMP     
  00000072            00086                 FSR_TEMP
  00000073            00087                 PCLATH_TEMP
                      00088         ENDC
                      00089                 
                      00090 ;*      *       *       *       *       *       *       *       *       *
                      00091 ;*                        DEFINICAO DE FLAGS                            *
                      00092 ;*      *       *       *       *       *       *       *       *       *
                      00093 
                      00094 ; AQUI SÃO DEFINIDOS OS FLAGS QUE SERÃO UTILIZADOS PELO SISTEMA
                      00095 
                      00096 #DEFINE  TECLA_0        TECLADO1,0  ; TECLA 0 DO TECLADO MATRICIAL
                      00097 #DEFINE  TECLA_1        TECLADO1,1  ; TECLA 1 DO TECLADO MATRICIAL      
                      00098 #DEFINE  TECLA_2        TECLADO1,2  ; TECLA 2 DO TECLADO MATRICIAL      
                      00099 #DEFINE  TECLA_3        TECLADO1,3  ; TECLA 3 DO TECLADO MATRICIAL
                      00100 #DEFINE  TECLA_4        TECLADO1,4  ; TECLA 4 DO TECLADO MATRICIAL
                      00101 #DEFINE  TECLA_5        TECLADO1,5  ; TECLA 5 DO TECLADO MATRICIAL
                      00102 #DEFINE  TECLA_6        TECLADO1,6  ; TECLA 6 DO TECLADO MATRICIAL
                      00103 #DEFINE  TECLA_7        TECLADO1,7  ; TECLA 7 DO TECLADO MATRICIAL
MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:48:15         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00104 #DEFINE  TECLA_8        TECLADO2,0  ; TECLA 8 DO TECLADO MATRICIAL
                      00105 #DEFINE  TECLA_9        TECLADO2,1  ; TECLA 9 DO TECLADO MATRICIAL
                      00106 #DEFINE  TECLA_C        TECLADO2,2  ; TECLA CORRIGE DO TECLADO MATRICIAL
                      00107 #DEFINE  TECLA_E        TECLADO2,3  ; TECLA ENTER DO TECLADO MATRICIAL
                      00108         
                      00109 ;*      *       *       *       *       *       *       *       *       *
                      00110 ;*                      DEFINICAO DE CONSTANTES                         *
                      00111 ;*      *       *       *       *       *       *       *       *       *
                      00112 
                      00113 ; AQUI SÃO DEFINIDOS AS CONSTANTES QUE SERÃO UTILIZADOS PELO SISTEMA
                      00114 
                      00115 #DEFINE LINHA_SUP       0x80    ; CONSTANTE PARA LINHA SUPERIOR
                      00116 #DEFINE LINHA_INF       0xC0    ; CONSTANTE PARA LINHA INFERIOR
                      00117 #DEFINE TEMPO_BEEP      .10     ; CONSTANTE PARA TOCAR BEEP(MULTIPLOS DE 1ms) 
                      00118 
                      00119 #DEFINE SEL_LINHA1      B'00001110'  ; SELECIONA LINHA 1        
                      00120 #DEFINE SEL_LINHA2      B'00001101'  ; SELECIONA LINHA 2                
                      00121 #DEFINE SEL_LINHA3      B'00001011'  ; SELECIONA LINHA 3                
                      00122 #DEFINE SEL_LINHA4      B'00000111'  ; SELECIONA LINHA 4        
                      00123 
                      00124 ;*      *       *       *       *       *       *       *       *       *
                      00125 ;*                        ENTRADAS DO SISTEMA                           *
                      00126 ;*      *       *       *       *       *       *       *       *       *
                      00127 
                      00128 #DEFINE COL1            PORTA,4      ; PINO DE ENTRADA DA COLUNA1       
                      00129 #DEFINE COL2            PORTA,5      ; PINO DE ENTRADA DA COLUNA2               
                      00130 #DEFINE COL3            PORTE,0      ; PINO DE ENTRADA DA COLUNA3               
                      00131 
                      00132 ;*      *       *       *       *       *       *       *       *       *
                      00133 ;*                        SAÍDAS DO SISTEMA                             *
                      00134 ;*      *       *       *       *       *       *       *       *       *
                      00135 
                      00136 ; AQUI SÃO DEFINIDAS AS SAÍDAS QUE SERÃO UTILIZADOS PELO SISTEMA
                      00137 
                      00138 #DEFINE BUS             PORTD   ; DEFINE O BARRAMENTO COMO O PORTD 
                      00139 #DEFINE RS              PORTE,1 ; RS DO DISPLAY
                      00140 #DEFINE EN              PORTE,2 ; EN DO DISPLAY
                      00141 #DEFINE BEEP            PORTC,5 ; SAÍDA PARA LIGAR O BEEP
                      00142 
                      00143 ;*      *       *       *       *       *       *       *       *       *
                      00144 ;*                      INICIALIZAÇÃO DA EEPROM                         *
                      00145 ;*      *       *       *       *       *       *       *       *       *
                      00146 
2100                  00147         ORG     0x2100
2100   0041 0070 0069 00148         DE      "Apice Treinamen."
       0063 0065 0020 
       0054 0072 0065 
       0069 006E 0061 
       006D 0065 006E 
       002E 
                      00149 
                      00150 ;*      *       *       *       *       *       *       *       *       *
                      00151 ;*                          VETOR DE RESET                              *
MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:48:15         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00152 ;*      *       *       *       *       *       *       *       *       *
                      00153 
0000                  00154         ORG     0x0000          ; ENDEREÇO INICIAL DA MÁQUINA
0000   28D9           00155         GOTO    CONFIG_         ; SALTA PARA CONFIGURAR A MÁQUINA
                      00156 
                      00157 ;*      *       *       *       *       *       *       *       *       *
                      00158 ;*                       VETOR DE INTERRUPÇÃO                           *
                      00159 ;*      *       *       *       *       *       *       *       *       *
                      00160 
0004                  00161         ORG     0x0004          ; ENDEREÇO INICIAL DO VETOR DE INTERRUPÇÃO
0004                  00162 SALVA_CONTEXTO
0004   00F0           00163         MOVWF   W_TEMP          ; SALVA W
0005   0E03           00164         SWAPF   STATUS,W        
0006   00F1           00165         MOVWF   STATUS_TEMP     ; SALVA STATUS
0007   0804           00166         MOVF    FSR,W
0008   00F2           00167         MOVWF   FSR_TEMP        ; SALVA FSR     
0009   080A           00168         MOVF    PCLATH,W        
000A   00F3           00169         MOVWF   PCLATH_TEMP     ; SALVA PCLATH
                      00170         
000B   0183           00171         CLRF    STATUS          ; GARANTE BANCO 0
000C   018A           00172         CLRF    PCLATH          ; GARANTE PÁGINA 0
                      00173         
000D   1A8C           00174         BTFSC   PIR1,RCIF       ; INTERRUPÇÃO SERIAL?
000E   2853           00175         GOTO    TRATA_SERIAL    ; SIM, ENTÃO TRATA
                      00176         
000F   190B           00177         BTFSC   INTCON,T0IF     ; INTERRUPÇÃO DE TIMER0?
0010   281A           00178         GOTO    TRATA_TIMER0    ; SIM, ENTÃO TRATA
                      00179         
0011                  00180 SAI_INTERRUPCAO 
0011   0872           00181         MOVF    FSR_TEMP,W
0012   0084           00182         MOVWF   FSR             ; RECUPERA FSR
0013   0873           00183         MOVF    PCLATH_TEMP,W   
0014   008A           00184         MOVWF   PCLATH          ; RECUPERA PCLATH
0015   0E71           00185         SWAPF   STATUS_TEMP,W
0016   0083           00186         MOVWF   STATUS          ; RECUPERA STATUS
0017   0EF0           00187         SWAPF   W_TEMP,F
0018   0E70           00188         SWAPF   W_TEMP,W        ; RECUPERA W
0019   0009           00189         RETFIE                  ; RETORNA DA INTERRUPÇÃO
                      00190 
                      00191 ;*      *       *       *       *       *       *       *       *       *
                      00192 ;*                  TRATATAMENTO DE INTERRUPÇÃO DE TIMER0               *
                      00193 ;*      *       *       *       *       *       *       *       *       *
                      00194 
001A                  00195 TRATA_TIMER0
                      00196         
001A   110B           00197         BCF     INTCON,T0IF      ; LIMPA FLAG DE INTERRUPÇÃO
001B   0AA4           00198         INCF    INDICE           ; INCREMENTA INDICE 
001C   3003           00199         MOVLW   B'00000011'      
001D   0524           00200         ANDWF   INDICE,W         ; MASCARA OS BITS SUPERIORES   
001E   0782           00201         ADDWF   PCL,F            ; SOMA CONTEÚDO COM PCL        
001F   2823           00202         GOTO    VERIFICA_LINHA1  ; SALTA PARA TRATAR A LINHA 1
0020   282F           00203         GOTO    VERIFICA_LINHA2  ; SALTA PARA TRATAR A LINHA 2
0021   283B           00204         GOTO    VERIFICA_LINHA3  ; SALTA PARA TRATAR A LINHA 3
MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:48:15         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0022   2847           00205         GOTO    VERIFICA_LINHA4  ; SALTA PARA TRATAR A LINHA 4
                      00206         
                      00207 
0023                  00208 VERIFICA_LINHA1
                      00209         
0023   300E           00210         MOVLW   SEL_LINHA1      
0024   0088           00211         MOVWF   BUS             ; SELECIONA A LINHA 1   
                      00212         
0025   10A2           00213         BCF     TECLA_1         ; LIMPA FLAG DA TECLA 1 PRESSIONADA
0026   1122           00214         BCF     TECLA_2         ; LIMPA FLAG DA TECLA 2 PRESSIONADA
0027   11A2           00215         BCF     TECLA_3         ; LIMPA FLAG DA TECLA 3 PRESSIONADA
                      00216                 
0028   1E05           00217         BTFSS   COL1            ; COLUNA1 ESTÁ PRESSIONADA?
0029   14A2           00218         BSF     TECLA_1         ; SIM, ENTÃO SETA TECLA_1
                      00219         
002A   1E85           00220         BTFSS   COL2            ; COLUNA2 ESTÁ PRESSIONADA?
002B   1522           00221         BSF     TECLA_2         ; SIM, ENTÃO SETA TECLA_2
                      00222         
002C   1C09           00223         BTFSS   COL3            ; COLUNA3 ESTÁ PRESSIONADA?
002D   15A2           00224         BSF     TECLA_3         ; SIM, ENTÃO SETA TECLA_3
                      00225         
002E   2811           00226         GOTO    SAI_INTERRUPCAO ; SAI DA INTERRUPÇÃO
                      00227         
002F                  00228 VERIFICA_LINHA2
                      00229         
002F   300D           00230         MOVLW   SEL_LINHA2
0030   0088           00231         MOVWF   BUS             ; SELECIONA A LINHA 2   
                      00232         
0031   1222           00233         BCF     TECLA_4         ; LIMPA FLAG DA TECLA 4 PRESSIONADA
0032   12A2           00234         BCF     TECLA_5         ; LIMPA FLAG DA TECLA 5 PRESSIONADA
0033   1322           00235         BCF     TECLA_6         ; LIMPA FLAG DA TECLA 6 PRESSIONADA
                      00236                 
0034   1E05           00237         BTFSS   COL1            ; COLUNA1 ESTÁ PRESSIONADA?
0035   1622           00238         BSF     TECLA_4         ; SIM, ENTÃO SETA TECLA_4
                      00239         
0036   1E85           00240         BTFSS   COL2            ; COLUNA2 ESTÁ PRESSIONADA?
0037   16A2           00241         BSF     TECLA_5         ; SIM, ENTÃO SETA TECLA_5
                      00242         
0038   1C09           00243         BTFSS   COL3            ; COLUNA3 ESTÁ PRESSIONADA?
0039   1722           00244         BSF     TECLA_6         ; SIM, ENTÃO SETA TECLA_6
                      00245         
003A   2811           00246         GOTO    SAI_INTERRUPCAO ; SAI DA INTERRUPÇÃO
                      00247 
003B                  00248 VERIFICA_LINHA3
                      00249         
003B   300B           00250         MOVLW   SEL_LINHA3
003C   0088           00251         MOVWF   BUS             ; SELECIONA A LINHA 3   
                      00252         
003D   13A2           00253         BCF     TECLA_7         ; LIMPA FLAG DA TECLA 7 PRESSIONADA
003E   1023           00254         BCF     TECLA_8         ; LIMPA FLAG DA TECLA 8 PRESSIONADA
003F   10A3           00255         BCF     TECLA_9         ; LIMPA FLAG DA TECLA 9 PRESSIONADA
                      00256                 
0040   1E05           00257         BTFSS   COL1            ; COLUNA1 ESTÁ PRESSIONADA?
MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:48:15         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0041   17A2           00258         BSF     TECLA_7         ; SIM, ENTÃO SETA TECLA_7
                      00259         
0042   1E85           00260         BTFSS   COL2            ; COLUNA2 ESTÁ PRESSIONADA?
0043   1423           00261         BSF     TECLA_8         ; SIM, ENTÃO SETA TECLA_8
                      00262         
0044   1C09           00263         BTFSS   COL3            ; COLUNA3 ESTÁ PRESSIONADA?
0045   14A3           00264         BSF     TECLA_9         ; SIM, ENTÃO SETA TECLA_9
                      00265         
0046   2811           00266         GOTO    SAI_INTERRUPCAO ; SAI DA INTERRUPÇÃO
                      00267 
0047                  00268 VERIFICA_LINHA4
                      00269         
0047   3007           00270         MOVLW   SEL_LINHA4      
0048   0088           00271         MOVWF   BUS             ; SELECIONA A LINHA 4   
                      00272         
0049   11A3           00273         BCF     TECLA_E         ; LIMPA FLAG DA TECLA ENTER PRESSIONADA
004A   1123           00274         BCF     TECLA_C         ; LIMPA FLAG DA TECLA CORRIGE PRESSIONADA
004B   1022           00275         BCF     TECLA_0         ; LIMPA FLAG DA TECLA 0 PRESSIONADA
                      00276                 
004C   1E05           00277         BTFSS   COL1            ; COLUNA1 ESTÁ PRESSIONADA?
004D   1523           00278         BSF     TECLA_C         ; SIM, ENTÃO SETA TECLA_C
                      00279         
004E   1E85           00280         BTFSS   COL2            ; COLUNA2 ESTÁ PRESSIONADA?
004F   1422           00281         BSF     TECLA_0         ; SIM, ENTÃO SETA TECLA_0
                      00282         
0050   1C09           00283         BTFSS   COL3            ; COLUNA3 ESTÁ PRESSIONADA?
0051   15A3           00284         BSF     TECLA_E         ; SIM, ENTÃO SETA TECLA_E
                      00285         
0052   2811           00286         GOTO    SAI_INTERRUPCAO ; SAI DA INTERRUPÇÃO
                      00287 
                      00288 ;*      *       *       *       *       *       *       *       *       *
                      00289 ;*                  TRATATAMENTO DE INTERRUPÇÃO SERIAL                  *
                      00290 ;*      *       *       *       *       *       *       *       *       *
                      00291 
0053                  00292 TRATA_SERIAL
                      00293         
0053   3010           00294         MOVLW   .16     
0054   0636           00295         XORWF   INDICE_BUFFER,W 
0055   1D03           00296         BTFSS   STATUS,Z        ; INDICE_BUFFER CHEGOU A 16?
0056   285A           00297         GOTO    TRATA_SERIAL_A  ; NÃO, ENTÃO SALTA PARA TRATA_SERIAL_A
0057   01B6           00298         CLRF    INDICE_BUFFER   ; SIM, ENTÃO LIMPA O ÍNDICE
0058   3080           00299         MOVLW   0x80            ; LIMPA O DISPLAY
0059   207D           00300         CALL    ENVIA_COMANDO_INT 
                      00301                 
005A                  00302 TRATA_SERIAL_A
                      00303         
005A   3026           00304         MOVLW   BUFFER0         ; PREPARA O PONTEIRO
005B   0736           00305         ADDWF   INDICE_BUFFER,W
005C   0084           00306         MOVWF   FSR
005D   0AB6           00307         INCF    INDICE_BUFFER
                      00308         
005E   081A           00309         MOVF    RCREG,W         
005F   0080           00310         MOVWF   INDF            ; SALVA O DADO NO PONTEIRO
MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:48:15         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0060   207E           00311         CALL    ENVIA_DADO_INT  ; CHAMA ROTINA PARA ENVIAR O DADO 
                      00312                                 ; O DISPLAY
0061   2811           00313         GOTO    SAI_INTERRUPCAO ; SAI DA INTERRUPÇÃO
                      00314 
                      00315 ;*      *       *       *       *       *       *       *       *       *
                      00316 ;*                        ROTINA PARA TOCAR O BEEP                      *
                      00317 ;*      *       *       *       *       *       *       *       *       *
                      00318 
0062                  00319 TOCA_BEEP
                      00320         
0062   1687           00321         BSF     BEEP            ; LIGA O BEEP
0063   30C8           00322         MOVLW   .200            
0064   2067           00323         CALL    DELAY_MS        ; AGUARDA 200ms
0065   1287           00324         BCF     BEEP            ; DESLIGA O BEEP
0066   0008           00325         RETURN                  ; RETORNA
                      00326                                 
                      00327 ;*      *       *       *       *       *       *       *       *       *
                      00328 ;*                    ROTINA DE DELAY DE 1ms A 256ms                    *
                      00329 ;*      *       *       *       *       *       *       *       *       *
                      00330         
0067                  00331 DELAY_MS
                      00332         
0067   0064           00333         CLRWDT
                      00334         
0068   00A1           00335         MOVWF   TEMPO2          ; SALVA O VALOR MULTIPLICADOR
0069   01A0           00336         CLRF    TEMPO1          ; LIMPA REGISTRADOR
                      00337 
006A                  00338 DELAY_A
                      00339         
006A   0000           00340         NOP                     ; PERDE 1 CICLO DE MÁQUINA
006B   0BA0           00341         DECFSZ  TEMPO1,F        ; DECREMENTA REGISTRADOR, ACABOU?
006C   286A           00342         GOTO    $-2             ; NÃO, ENTÃO RETORNA DUAS POSIÇÕES 
006D   0BA1           00343         DECFSZ  TEMPO2,F
006E   286A           00344         GOTO    DELAY_A
                      00345         
006F   0008           00346         RETURN                  ; RETORNA DA INTERRUPÇÃO
                      00347 
                      00348 ;*      *       *       *       *       *       *       *       *       *
                      00349 ;*                ROTINA PARA ESCREVER DADOS NO DISPLAY                 *
                      00350 ;*      *       *       *       *       *       *       *       *       *
                      00351 
0070                  00352 ENVIA_COMANDO
                      00353         
0070   1089           00354         BCF     RS              ; PÕE EM MODO DE COMANDO
                      00355         
0071                  00356 ENVIA_DADO
                      00357         
0071   138B           00358         BCF     INTCON,GIE      ; DESLIGA A INTERRUPÇÃO
                      00359         
0072   0088           00360         MOVWF   BUS             ; MOVE DADO PARA O PORTD
                      00361                 
0073   2874           00362         GOTO    $+1             ; DEÇAY PARA ACOMODAÇÃO
0074   2875           00363         GOTO    $+1             
MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:48:15         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00364         
0075   1509           00365         BSF     EN              ; GERA PULSO DE CLOCK
0076   2877           00366         GOTO    $+1
0077   1109           00367         BCF     EN
                      00368         
0078   1489           00369         BSF     RS              ; VOLTA PARA O MODO DADOS
0079   3001           00370         MOVLW   .1
007A   2067           00371         CALL    DELAY_MS
007B   178B           00372         BSF     INTCON,GIE      ; LIGA A INTERRUPÇÃO
007C   0008           00373         RETURN                  ; RETORNA DA INTERRUPÇÃO
                      00374 
                      00375 ;*      *       *       *       *       *       *       *       *       *
                      00376 ;*         ROTINA PARA ESCREVER DADOS NO DISPLAY PELA INTERRUPÇÃO       *
                      00377 ;*      *       *       *       *       *       *       *       *       *
                      00378 
007D                  00379 ENVIA_COMANDO_INT
                      00380         
007D   1089           00381         BCF     RS              ; PÕE EM MODO DE COMANDO
                      00382         
007E                  00383 ENVIA_DADO_INT
                      00384         
007E   0088           00385         MOVWF   BUS             ; MOVE DADO PARA O PORTD
                      00386                 
007F   2880           00387         GOTO    $+1             ; DEÇAY PARA ACOMODAÇÃO
0080   2881           00388         GOTO    $+1             
                      00389         
0081   1509           00390         BSF     EN              ; GERA PULSO DE CLOCK
0082   2883           00391         GOTO    $+1
0083   1109           00392         BCF     EN
                      00393         
0084   1489           00394         BSF     RS              ; VOLTA PARA O MODO DADOS
0085   3001           00395         MOVLW   .1
0086   2067           00396         CALL    DELAY_MS
0087   0008           00397         RETURN                  ; RETORNA DA INTERRUPÇÃO
                      00398 
                      00399 ;*      *       *       *       *       *       *       *       *       *
                      00400 ;*                   ROTINA PARA SALVAR O BUFFER NA EEPROM              *
                      00401 ;*      *       *       *       *       *       *       *       *       *
                      00402 
0088                  00403 GUARDA_BUFFER
                      00404         
0088   2062           00405         CALL    TOCA_BEEP       ; CHAMA ROTINA PARA TOCAR O BEEP        
                      00406         
0089   138B           00407         BCF     INTCON,GIE      ; DESLIGA A INTERRUPÇÃO PARA SALVAR DADOS
                      00408                                 ; NA EEPROM(OBRIGATÓRIO)
008A   01B8           00409         CLRF    ENDERECO_LO     ; LIMPA O APONTADOR DE ENDEREÇOS
                      00410         
008B   3026           00411         MOVLW   BUFFER0
008C   0084           00412         MOVWF   FSR
                      00413         
008D                  00414 GUARDA_A
                      00415 
008D   0800           00416         MOVF    INDF,W
MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:48:15         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

008E   00BA           00417         MOVWF   DADOS_LO
008F   20B6           00418         CALL    ESCREVE_EEPROM
0090   0A84           00419         INCF    FSR,F
0091   0AB8           00420         INCF    ENDERECO_LO,F
0092   3010           00421         MOVLW   .16
0093   0638           00422         XORWF   ENDERECO_LO,W
0094   1D03           00423         BTFSS   STATUS,Z
0095   288D           00424         GOTO    GUARDA_A 
                      00425          
0096   178B           00426         BSF     INTCON,GIE      ; LIGA A INTERRUPÇÃO
                      00427         
0097   0064           00428         CLRWDT
0098   19A3           00429         BTFSC   TECLA_E         ; AGUARDA SOLTAR A TECLA
0099   2897           00430         GOTO    $-2
                      00431         
009A   2062           00432         CALL    TOCA_BEEP       ; CHAMA ROTINA PARA TOCAR O BEEP        
009B   0008           00433         RETURN                  ; RETORNA DA ROTINA
                      00434 
                      00435 ;*      *       *       *       *       *       *       *       *       *
                      00436 ;*                   ROTINA PARA LER O BUFFER DA EEPROM                 *
                      00437 ;*      *       *       *       *       *       *       *       *       *
                      00438 
009C                  00439 LE_DADOS
                      00440         
009C   20A6           00441         CALL    LE_EEPROM       ; CHAMA ROTINA PARA LER A EEPROM        
009D   2071           00442         CALL    ENVIA_DADO      ; ENVIA O DADO LIDO PARA O DISPLAY
009E   0AB8           00443         INCF    ENDERECO_LO     ; INCREMENTA O APONTADOR DE ENDEREÇOS
009F   3010           00444         MOVLW   .16     
00A0   0638           00445         XORWF   ENDERECO_LO,W   ; VERIFICA SE ACABOU DE LER TUDO
00A1   1D03           00446         BTFSS   STATUS,Z
00A2   289C           00447         GOTO    LE_DADOS                
                      00448         
00A3   3080           00449         MOVLW   0x80            ; POSICIONA O DISPLAY PARA A PRIMEIRA
00A4   2070           00450         CALL    ENVIA_COMANDO   ; LINHA E PRIMEIRA COLUNA
                      00451                 
00A5   0008           00452         RETURN                  ; RETORNA DA ROTINA     
                      00453 
                      00454  ;*     *       *       *       *       *       *       *       *       *
                      00455 ;*                        ROTINA DE LEITURA DE DADOS                    *
                      00456 ;*      *       *       *       *       *       *       *       *       *
                      00457 
00A6                  00458 LE_EEPROM
                      00459         
00A6   0838           00460         MOVF    ENDERECO_LO,W           ; MOVE O ENDEREÇO DE LEITURA PARA
00A7   1283 1703      00461         BANKSEL EEADR                   ; EEADR
00A9   008D           00462         MOVWF   EEADR
00AA   018F           00463         CLRF    EEADRH
00AB   1683 1703      00464         BANKSEL EECON1
00AD   138C           00465         BCF     EECON1,EEPGD            ; APONTA PARA MEMÓRIA EEPROM
00AE   140C           00466         BSF     EECON1,RD               ; FAZ A LEITURA
00AF   1283 1703      00467         BANKSEL EEDATA          
00B1   080C           00468         MOVF    EEDATA,W                ; MOVE O DADO LIDO PARA DADOS_LO
00B2   1283 1303      00469         BANKSEL DADOS_LO
MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:48:15         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00B4   00BA           00470         MOVWF   DADOS_LO
00B5   0008           00471         RETURN                          ; RETORNA
                      00472         
                      00473 ;*      *       *       *       *       *       *       *       *       *
                      00474 ;*                        ROTINA DE ESCRITA DE DADOS                    *
                      00475 ;*      *       *       *       *       *       *       *       *       *
                      00476 
00B6                  00477 ESCREVE_EEPROM
                      00478         
00B6   083A           00479         MOVF    DADOS_LO,W              ; MOVE O DADO A SER SALVO               
00B7   1283 1703      00480         BANKSEL EEDATA                  ; PARA EEDATA
00B9   008C           00481         MOVWF   EEDATA
                      00482         
00BA   1283 1303      00483         BANKSEL ENDERECO_LO             ; MOVE O ENDEREÇO PARA EEADR
00BC   0838           00484         MOVF    ENDERECO_LO,W
00BD   1283 1703      00485         BANKSEL EEADR
00BF   008D           00486         MOVWF   EEADR
                      00487 
00C0   1683 1703      00488         BANKSEL EECON1
00C2   138C           00489         BCF     EECON1,EEPGD            ; APONTA PARA MEMÓRIA EEPROM
00C3   150C           00490         BSF     EECON1,WREN             ; HABILITA A ESCRITA DE DADOS
00C4   3055           00491         MOVLW   0x55    
00C5   008D           00492         MOVWF   EECON2  
00C6   30AA           00493         MOVLW   0xAA            
00C7   008D           00494         MOVWF   EECON2                  
00C8   148C           00495         BSF     EECON1,WR               ; HABILITA A ESCRITA
00C9   188C           00496         BTFSC   EECON1,WR               ; AGUARDA O FIM DA ESCRITA
00CA   28C9           00497         GOTO    $-1
                      00498         
00CB   110C           00499         BCF     EECON1,WREN             ; DESABILITA A ESCRITA
00CC   1283 1303      00500         BANKSEL DADOS_LO                        
00CE   0008           00501         RETURN                          ; RETORNA 
                      00502 
                      00503 ;*      *       *       *       *       *       *       *       *       *
                      00504 ;*             ROTINA PARA RECUPERAR O DADO SALVO NA EEPROM             *
                      00505 ;*      *       *       *       *       *       *       *       *       *
                      00506 
00CF                  00507 RECUPERA_EEPROM
                      00508 
00CF   2062           00509         CALL    TOCA_BEEP
00D0   3080           00510         MOVLW   0x80
00D1   2070           00511         CALL    ENVIA_COMANDO
00D2   01B8           00512         CLRF    ENDERECO_LO
00D3   209C           00513         CALL    LE_DADOS
                      00514         
00D4   0064           00515         CLRWDT
00D5   1923           00516         BTFSC   TECLA_C
00D6   28D4           00517         GOTO    $-2
                      00518         
00D7   2062           00519         CALL    TOCA_BEEP
00D8   0008           00520         RETURN
                      00521                         
                      00522 ;*      *       *       *       *       *       *       *       *       *
MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:48:15         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00523 ;*                        CONFIGURACOES INICIAIS                        *
                      00524 ;*      *       *       *       *       *       *       *       *       *
                      00525 
00D9                  00526 CONFIG_
                      00527 
00D9   0185           00528         CLRF    PORTA           ; LIMPA O PORTA
00DA   0186           00529         CLRF    PORTB           ; LIMPA O PORTB
00DB   0187           00530         CLRF    PORTC           ; LIMPA O PORTC
00DC   0188           00531         CLRF    PORTD           ; LIMPA O PORTD
00DD   0189           00532         CLRF    PORTE           ; LIMPA O PORTE
                      00533         
00DE   1683           00534         BANK1                   ; SELECIONA BANCO1 DE MEMÓRIA
                      00535         
00DF   30FF           00536         MOVLW   B'11111111'
00E0   0085           00537         MOVWF   TRISA
                      00538         
00E1   30C0           00539         MOVLW   B'11000000'
00E2   0086           00540         MOVWF   TRISB           ; CONFIGURA I/O DO PORTB
                      00541         
00E3   30DF           00542         MOVLW   B'11011111'
00E4   0087           00543         MOVWF   TRISC           ; CONFIGURA I/O DO PORTB
                      00544         
00E5   3000           00545         MOVLW   B'00000000'     ; CONFIGURA TODOS OS PINOS DESTE
00E6   0088           00546         MOVWF   TRISD           ; PORTB COMO SAÍDA
                      00547         
00E7   3001           00548         MOVLW   B'00000001'
00E8   0089           00549         MOVWF   TRISE           ; CONFIGURA I/O DO PORTE
                      00550         
00E9   308F           00551         MOVLW   B'10001111'     ; DESLIGA PULL-UPS
00EA   0081           00552         MOVWF   OPTION_REG      ; WDT 1:128
                      00553         
00EB   3020           00554         MOVLW   B'00100000'
00EC   008C           00555         MOVWF   PIE1            ; HABILITA A INTERUPÇÃO SERIAL
                      00556         
00ED   3060           00557         MOVLW   B'01100000'     
00EE   008B           00558         MOVWF   INTCON          ; HABILITA A INTERRUPÇÃO DE TIMER 0
                      00559                                 ; LIGA A CHAVE GERAL DE INTERRUPÇÃO
                      00560         
00EF   3007           00561         MOVLW   B'00000111'     ; DESLIGA OS A/D´S
00F0   009F           00562         MOVWF   ADCON1
                      00563         
00F1   3019           00564         MOVLW   .25
00F2   0099           00565         MOVWF   SPBRG           ; PREPARA PARA FUNCIONAR A 9600bps
                      00566         
00F3   3024           00567         MOVLW   B'00100100'
00F4   0098           00568         MOVWF   TXSTA           ; CONFIGURA USART
                      00569         
00F5   1283           00570         BANK0
                      00571         
00F6   3090           00572         MOVLW   B'10010000'
00F7   0098           00573         MOVWF   RCSTA           ; CONFIGURA USART
                      00574         
00F8   1A03           00575         BTFSC   STATUS,NOT_TO   ; ESTOURO POR WDT?
MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:48:15         PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00F9   28F9           00576         GOTO    $               ; NÃO, ENTÃO AGUARDA
                      00577                 
00FA                  00578 LIMPEZA_DA_RAM
                      00579                                 ; ROTINA DE LIMPEZA DA RAM
                      00580                                 
00FA   3020           00581         MOVLW   0x20
00FB   0084           00582         MOVWF   FSR
00FC   0180           00583         CLRF    INDF
00FD   0A84           00584         INCF    FSR,F
00FE   3080           00585         MOVLW   0x80
00FF   0604           00586         XORWF   FSR,W
0100   1D03           00587         BTFSS   STATUS,Z
0101   28FC           00588         GOTO    $-5
                      00589 
0102   178B           00590         BSF     INTCON,GIE      ; LIGA AS INTERRUPÇÕES
                      00591         
                      00592 ;*      *       *       *       *       *       *       *       *       *
                      00593 ;*                       INICIALIZAÇÃO DO DISPLAY                       *
                      00594 ;*      *       *       *       *       *       *       *       *       *
                      00595         
0103   3030           00596         MOVLW   0x30                    
0104   2070           00597         CALL    ENVIA_COMANDO           ; COMANDO DE INICIALIZAÇÃO
                      00598         
0105   3003           00599         MOVLW   .3                      
0106   2067           00600         CALL    DELAY_MS                ; DELAY DE 3ms
                      00601         
0107   3030           00602         MOVLW   0x30                    
0108   2070           00603         CALL    ENVIA_COMANDO           ; COMANDO DE INICIALIZAÇÃO      
                      00604         
0109   3030           00605         MOVLW   0x30                    
010A   2070           00606         CALL    ENVIA_COMANDO           ; COMANDO DE INICIALIZAÇÃO
                      00607         
010B   3038           00608         MOVLW   0x38                    
010C   2070           00609         CALL    ENVIA_COMANDO           ; INTERFACE DE 8 VIAS
                      00610         
010D   3001           00611         MOVLW   0x01                    
010E   2070           00612         CALL    ENVIA_COMANDO           ; LIMPA O DISPLAY
                      00613         
010F   3001           00614         MOVLW   .1
0110   2067           00615         CALL    DELAY_MS                ; CHAMA DELAY DE 3ms
                      00616         
0111   300C           00617         MOVLW   0x0C                    
0112   2070           00618         CALL    ENVIA_COMANDO           ; LIGAR O DISPLAY SEM CURSOR
                      00619         
0113   3006           00620         MOVLW   0x06                    
0114   2070           00621         CALL    ENVIA_COMANDO           ; LIGAR O DISPLAY SEM CURSOR
                      00622         
                      00623                                                                 
                      00624 ;*      *       *       *       *       *       *       *       *       *
                      00625 ;*                       INICIALIZAÇÃO DAS VARIÁVEIS                    *
                      00626 ;*      *       *       *       *       *       *       *       *       *
                      00627         
0115   209C           00628         CALL    LE_DADOS                ; CHAMA ROTINA PARA CARREGAR O
MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:48:15         PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00629                                         ; ÚLTIMO DADO SALVA NA EEPROM 
                      00630         
                      00631 ;*      *       *       *       *       *       *       *       *       *
                      00632 ;*                          ROTINA PRINCIPAL                            *
                      00633 ;*      *       *       *       *       *       *       *       *       *
                      00634 
0116                  00635 LOOP
0116   0064           00636         CLRWDT                  ; LIMPA O WATCHDOG
                      00637         
0117   1923           00638         BTFSC   TECLA_C         ; A TECLA ESTÁ PRESSIONADA?
0118   20CF           00639         CALL    RECUPERA_EEPROM ; SIM, ENTÃO RECUPERA OS DADOS DA EEPROM
                      00640         
0119   19A3           00641         BTFSC   TECLA_E         ; A TECLA ESTÁ PRESSIONADA?
011A   2088           00642         CALL    GUARDA_BUFFER   ; SIM, ENTÃO SALVA DADOS DO BUFFER NA EEPROM
011B   2916           00643         GOTO    LOOP            ; NÃO, ENTÃO VOLTA PARA LOOP
                      00644                         
                      00645 ;*      *       *       *       *       *       *       *       *       *
                      00646 ;*                           FIM DO PROGRAMA                            *
                      00647 ;*      *       *       *       *       *       *       *       *       *
                      00648 
                      00649 
                      00650         END                     ; FIM DO PROGRAMA
MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:48:15         PAGE 14


SYMBOL TABLE
  LABEL                             VALUE 

ACKDT                             00000005
ACKEN                             00000004
ACKSTAT                           00000006
ADCON0                            0000001F
ADCON1                            0000009F
ADCS0                             00000006
ADCS1                             00000007
ADDEN                             00000003
ADFM                              00000007
ADIE                              00000006
ADIF                              00000006
ADON                              00000000
ADRESH                            0000001E
ADRESL                            0000009E
BANK0                             BCF     STATUS,RP0
BANK1                             BSF     STATUS,RP0
BCLIE                             00000003
BCLIF                             00000003
BEEP                              PORTC,5
BF                                00000000
BRGH                              00000002
BUFFER0                           00000026
BUFFER1                           00000027
BUFFER10                          00000030
BUFFER11                          00000031
BUFFER12                          00000032
BUFFER13                          00000033
BUFFER14                          00000034
BUFFER15                          00000035
BUFFER2                           00000028
BUFFER3                           00000029
BUFFER4                           0000002A
BUFFER5                           0000002B
BUFFER6                           0000002C
BUFFER7                           0000002D
BUFFER8                           0000002E
BUFFER9                           0000002F
BUS                               PORTD
C                                 00000000
CCP1CON                           00000017
CCP1IE                            00000002
CCP1IF                            00000002
CCP1M0                            00000000
CCP1M1                            00000001
CCP1M2                            00000002
CCP1M3                            00000003
CCP1X                             00000005
CCP1Y                             00000004
CCP2CON                           0000001D
CCP2IE                            00000000
CCP2IF                            00000000
CCP2M0                            00000000
CCP2M1                            00000001
MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:48:15         PAGE 15


SYMBOL TABLE
  LABEL                             VALUE 

CCP2M2                            00000002
CCP2M3                            00000003
CCP2X                             00000005
CCP2Y                             00000004
CCPR1H                            00000016
CCPR1L                            00000015
CCPR2H                            0000001C
CCPR2L                            0000001B
CHS0                              00000003
CHS1                              00000004
CHS2                              00000005
CKE                               00000006
CKP                               00000004
COL1                              PORTA,4
COL2                              PORTA,5
COL3                              PORTE,0
CONFIG_                           000000D9
CREN                              00000004
CSRC                              00000007
D                                 00000005
DADOS_HI                          00000039
DADOS_LO                          0000003A
DATA_ADDRESS                      00000005
DC                                00000001
DELAY_A                           0000006A
DELAY_MS                          00000067
D_A                               00000005
EEADR                             0000010D
EEADRH                            0000010F
EECON1                            0000018C
EECON2                            0000018D
EEDATA                            0000010C
EEDATH                            0000010E
EEIE                              00000004
EEIF                              00000004
EEPGD                             00000007
EN                                PORTE,2
ENDERECO_HI                       00000037
ENDERECO_LO                       00000038
ENVIA_COMANDO                     00000070
ENVIA_COMANDO_INT                 0000007D
ENVIA_DADO                        00000071
ENVIA_DADO_INT                    0000007E
ESCREVE_EEPROM                    000000B6
F                                 00000001
FERR                              00000002
FSR                               00000004
FSR_TEMP                          00000072
GCEN                              00000007
GIE                               00000007
GO                                00000002
GO_DONE                           00000002
GUARDA_A                          0000008D
MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:48:15         PAGE 16


SYMBOL TABLE
  LABEL                             VALUE 

GUARDA_BUFFER                     00000088
I2C_DATA                          00000005
I2C_READ                          00000002
I2C_START                         00000003
I2C_STOP                          00000004
IBF                               00000007
IBOV                              00000005
INDF                              00000000
INDICE                            00000024
INDICE_BUFFER                     00000036
INTCON                            0000000B
INTE                              00000004
INTEDG                            00000006
INTF                              00000001
IRP                               00000007
LE_DADOS                          0000009C
LE_EEPROM                         000000A6
LIMPEZA_DA_RAM                    000000FA
LINHA_INF                         0xC0
LINHA_SUP                         0x80
LOOP                              00000116
NOT_A                             00000005
NOT_ADDRESS                       00000005
NOT_BO                            00000000
NOT_BOR                           00000000
NOT_DONE                          00000002
NOT_PD                            00000003
NOT_POR                           00000001
NOT_RBPU                          00000007
NOT_RC8                           00000006
NOT_T1SYNC                        00000002
NOT_TO                            00000004
NOT_TX8                           00000006
NOT_W                             00000002
NOT_WRITE                         00000002
OBF                               00000006
OERR                              00000001
OPTION_REG                        00000081
P                                 00000004
PCFG0                             00000000
PCFG1                             00000001
PCFG2                             00000002
PCFG3                             00000003
PCL                               00000002
PCLATH                            0000000A
PCLATH_TEMP                       00000073
PCON                              0000008E
PEIE                              00000006
PEN                               00000002
PIE1                              0000008C
PIE2                              0000008D
PIR1                              0000000C
PIR2                              0000000D
MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:48:15         PAGE 17


SYMBOL TABLE
  LABEL                             VALUE 

PORTA                             00000005
PORTB                             00000006
PORTC                             00000007
PORTD                             00000008
PORTE                             00000009
PR2                               00000092
PS0                               00000000
PS1                               00000001
PS2                               00000002
PSA                               00000003
PSPIE                             00000007
PSPIF                             00000007
PSPMODE                           00000004
R                                 00000002
RBIE                              00000003
RBIF                              00000000
RC8_9                             00000006
RC9                               00000006
RCD8                              00000000
RCEN                              00000003
RCIE                              00000005
RCIF                              00000005
RCREG                             0000001A
RCSTA                             00000018
RD                                00000000
READ_WRITE                        00000002
RECUPERA_EEPROM                   000000CF
RP0                               00000005
RP1                               00000006
RS                                PORTE,1
RSEN                              00000001
RX9                               00000006
RX9D                              00000000
R_W                               00000002
S                                 00000003
SAI_INTERRUPCAO                   00000011
SALVA_CONTEXTO                    00000004
SEL_LINHA1                        B'00001110'
SEL_LINHA2                        B'00001101'
SEL_LINHA3                        B'00001011'
SEL_LINHA4                        B'00000111'
SEN                               00000000
SMP                               00000007
SPBRG                             00000099
SPEN                              00000007
SREN                              00000005
SSPADD                            00000093
SSPBUF                            00000013
SSPCON                            00000014
SSPCON2                           00000091
SSPEN                             00000005
SSPIE                             00000003
SSPIF                             00000003
MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:48:15         PAGE 18


SYMBOL TABLE
  LABEL                             VALUE 

SSPM0                             00000000
SSPM1                             00000001
SSPM2                             00000002
SSPM3                             00000003
SSPOV                             00000006
SSPSTAT                           00000094
STATUS                            00000003
STATUS_TEMP                       00000071
SYNC                              00000004
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
T1CKPS0                           00000004
T1CKPS1                           00000005
T1CON                             00000010
T1INSYNC                          00000002
T1OSCEN                           00000003
T1SYNC                            00000002
T2CKPS0                           00000000
T2CKPS1                           00000001
T2CON                             00000012
TECLADO1                          00000022
TECLADO2                          00000023
TECLA_0                           TECLADO1,0
TECLA_1                           TECLADO1,1
TECLA_2                           TECLADO1,2
TECLA_3                           TECLADO1,3
TECLA_4                           TECLADO1,4
TECLA_5                           TECLADO1,5
TECLA_6                           TECLADO1,6
TECLA_7                           TECLADO1,7
TECLA_8                           TECLADO2,0
TECLA_9                           TECLADO2,1
TECLA_C                           TECLADO2,2
TECLA_E                           TECLADO2,3
TEMP                              00000025
TEMPO1                            00000020
TEMPO2                            00000021
TEMPO_BEEP                        .10
TMR0                              00000001
TMR1CS                            00000001
TMR1H                             0000000F
TMR1IE                            00000000
TMR1IF                            00000000
TMR1L                             0000000E
TMR1ON                            00000000
TMR2                              00000011
TMR2IE                            00000001
TMR2IF                            00000001
TMR2ON                            00000002
TOCA_BEEP                         00000062
TOUTPS0                           00000003
MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:48:15         PAGE 19


SYMBOL TABLE
  LABEL                             VALUE 

TOUTPS1                           00000004
TOUTPS2                           00000005
TOUTPS3                           00000006
TRATA_SERIAL                      00000053
TRATA_SERIAL_A                    0000005A
TRATA_TIMER0                      0000001A
TRISA                             00000085
TRISB                             00000086
TRISC                             00000087
TRISD                             00000088
TRISE                             00000089
TRISE0                            00000000
TRISE1                            00000001
TRISE2                            00000002
TRMT                              00000001
TX8_9                             00000006
TX9                               00000006
TX9D                              00000000
TXD8                              00000000
TXEN                              00000005
TXIE                              00000004
TXIF                              00000004
TXREG                             00000019
TXSTA                             00000098
UA                                00000001
VERIFICA_LINHA1                   00000023
VERIFICA_LINHA2                   0000002F
VERIFICA_LINHA3                   0000003B
VERIFICA_LINHA4                   00000047
W                                 00000000
WCOL                              00000007
WR                                00000001
WREN                              00000002
WRERR                             00000003
W_TEMP                            00000070
Z                                 00000002
_BODEN_OFF                        00003FBF
_BODEN_ON                         00003FFF
_CPD_OFF                          00003FFF
_CPD_ON                           00003EFF
_CP_ALL                           00000FCF
_CP_HALF                          00001FDF
_CP_OFF                           00003FFF
_CP_UPPER_256                     00002FEF
_DEBUG_OFF                        00003FFF
_DEBUG_ON                         000037FF
_HS_OSC                           00003FFE
_LP_OSC                           00003FFC
_LVP_OFF                          00003F7F
_LVP_ON                           00003FFF
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FF7
_RC_OSC                           00003FFF
MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:48:15         PAGE 20


SYMBOL TABLE
  LABEL                             VALUE 

_WDT_OFF                          00003FFB
_WDT_ON                           00003FFF
_WRT_ENABLE_OFF                   00003DFF
_WRT_ENABLE_ON                    00003FFF
_XT_OSC                           00003FFD
__16F877                          00000001


MEMORY USAGE MAP ('X' = Used,  '-' = Unused)

0000 : X---XXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0040 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0080 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
00C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0100 : XXXXXXXXXXXXXXXX XXXXXXXXXXXX---- ---------------- ----------------
2000 : -------X-------- ---------------- ---------------- ----------------
2100 : XXXXXXXXXXXXXXXX ---------------- ---------------- ----------------

All other memory blocks unused.

Program Memory Words Used:   281
Program Memory Words Free:  7911


Errors   :     0
Warnings :     0 reported,     0 suppressed
Messages :     0 reported,    27 suppressed

