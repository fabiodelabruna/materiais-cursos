MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:51:35         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001 ;*      *       *       *       *       *       *       *       *       *
                      00002 ;*                                                                      *
                      00003 ;*          EXEMPLO3: UTILIZAÇÃO DA MEMÓRIA DE PROGRAMA DO PIC          *
                      00004 ;*                   APOSTILA MÓDULO B  -  PIC16F877A                   *
                      00005 ;*                    ÁPICE TECNOLOGIA E TREINAMENTO                    *
                      00006 ;*          VERSÃO 1.0                          DATA:03/05/2005         *
                      00007 ;*                                                                      *
                      00008 ;*      *       *       *       *       *       *       *       *       *
                      00009 
                      00010 ;*      *       *       *       *       *       *       *       *       *
                      00011 ;*                       OBJETIVO DO ARQUIVO FONTE                      *
                      00012 ;*                                                                      *
                      00013 ;*              DEMONSTRAR A UTILIZAÇÃO DA EEPROM DO PIC                *
                      00014 ;*                                                                      *
                      00015 ;*      *       *       *       *       *       *       *       *       *
                      00016 
                      00017  #INCLUDE <P16F877.INC>         ;ARQUIVO PADRÃO PARA PIC16F877A
                      00001         LIST
                      00002 ; P16F877.INC  Standard Header File, Version 1.00    Microchip Technology, Inc.
                      00373         LIST
2007   3F35           00018  __CONFIG _CP_OFF & _XT_OSC & _PWRTE_ON & _LVP_OFF & _WDT_ON & _BODEN_OFF & _CPD_OFF & _DEBUG_OFF
                      00019  ERRORLEVEL 2   
                      00020         ;NESTE PONTO É INFORMADO A CONFIGURAÇÃO DA MÁQUINA, OU SEJA, SE TERÁ
                      00021         ;CÓDIGO DE PROTEÇÃO OU O TIPO DE CRISTAL QUE SERÁ UTILIZADO     
                      00022 
                      00023         ;CONFIGURAÇÃO DA MÁQUINA
                      00024         ; CODE PROTECT                  -> DESLIGADO
                      00025         ; OSCILADOR                     -> CRISTAL OU RESSONADOR
                      00026         ; POWER-UP                      -> LIGADO
                      00027         ; DEBUF                         -> DESLIGADO            
                      00028         ; PROGRAMAÇÃO EM BAIXA VOLTAGEM -> DESLIGADO
                      00029         ; WATCH DOG                     -> LIGADO
                      00030         ; BROWN-OUT RESET               -> DESLIGADO
                      00031         ; PROTEÇÃO DE EEPROM            -> DESLIGADO
                      00032                 
                      00033 ;*      *       *       *       *       *       *       *       *       *
                      00034 ;*                         PAGINAÇÃO DE MEMÓRIA                         *
                      00035 ;*      *       *       *       *       *       *       *       *       *
                      00036 
                      00037 ; AQUI CRIAREMOS UM PSEUDÔNIMO PARA UM COMANDO. POR EXEMPLO, O COMANDO
                      00038 ; "BCF STATUS,RP0" PODE SER SUBSTITUÍDO SEM PROBLEMAS POR "BANK0". O 
                      00039 ; COMPILADOR IRÁ SUBSTITUIR INTERNAMENTE "BANK0" POR "BCF STATUS,RP0".
                      00040 ; ESTA APLICAÇÃO É VÁLIDA PARA OUTROS TIPOS DE COMANDOS
                      00041 
                      00042 #DEFINE BANK0   BCF     STATUS,RP0      ; ESCOLHE BANCO DE MEMÓRIA 0
                      00043 #DEFINE BANK1   BSF     STATUS,RP0      ; ESCOLHE BANCO DE MEMÓRIA 1
                      00044 
                      00045 ;*      *       *       *       *       *       *       *       *       *
                      00046 ;*                           DEFINICAO DE RAM                           *
                      00047 ;*      *       *       *       *       *       *       *       *       *
                      00048 
                      00049 ; AQUI IREMOS CRIAR AS VARIÁVEIS DO NOSSO SISTEMA
                      00050 
MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:51:35         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00051         CBLOCK 0x20      ; INÍCIO DO BLOCO DE RAM(GPR)
  00000020            00052                 TEMPO1   ; VARIÁVEL DA ROTINA DE TEMPO          
  00000021            00053                 TEMPO2   ; VARIÁVEL DA ROTINA DE TEMPO                          
  00000022            00054                 TECLADO1 ; VARIÁVEL PARA MARCAR AS TECLAS  
  00000023            00055                 TECLADO2 ; VARIÁVEL PARA MARCAR AS TECLAS
  00000024            00056                 INDICE   ; VARIÁVEL DE ÍNDICE
  00000025            00057                 TEMP     ; VARIÁVEL TEMPORÁRIA          
  00000026            00058                 BUFFER0  ; BUFFER PARA ARMAZENAR O BYTE
  00000027            00059                 BUFFER1  ; BUFFER PARA ARMAZENAR O BYTE
  00000028            00060                 BUFFER2  ; BUFFER PARA ARMAZENAR O BYTE
  00000029            00061                 BUFFER3  ; BUFFER PARA ARMAZENAR O BYTE
  0000002A            00062                 BUFFER4  ; BUFFER PARA ARMAZENAR O BYTE
  0000002B            00063                 BUFFER5  ; BUFFER PARA ARMAZENAR O BYTE
  0000002C            00064                 BUFFER6  ; BUFFER PARA ARMAZENAR O BYTE
  0000002D            00065                 BUFFER7  ; BUFFER PARA ARMAZENAR O BYTE
  0000002E            00066                 BUFFER8  ; BUFFER PARA ARMAZENAR O BYTE
  0000002F            00067                 BUFFER9  ; BUFFER PARA ARMAZENAR O BYTE
  00000030            00068                 BUFFER10 ; BUFFER PARA ARMAZENAR O BYTE
  00000031            00069                 BUFFER11 ; BUFFER PARA ARMAZENAR O BYTE
  00000032            00070                 BUFFER12 ; BUFFER PARA ARMAZENAR O BYTE
  00000033            00071                 BUFFER13 ; BUFFER PARA ARMAZENAR O BYTE
  00000034            00072                 BUFFER14 ; BUFFER PARA ARMAZENAR O BYTE
  00000035            00073                 BUFFER15 ; BUFFER PARA ARMAZENAR O BYTE
  00000036            00074                 INDICE_BUFFER ; INDICE PARA O BUFFER
                      00075                 
  00000037            00076                 ENDERECO_HI ; VARIÁVEIS PARA CONTROLE DO        
  00000038            00077                 ENDERECO_LO ; ENDEREÇO DA EEPROM E FLASH
  00000039            00078                 DADOS_HI    ; DADOS DE ESCRITA E LEITURA        
  0000003A            00079                 DADOS_LO    ; DA MEMÓRIA DE PROGRAMA E DADOS    
                      00080                 
                      00081         ENDC             ; FIM DO BLOCO DE RAM(GPR)
                      00082         
                      00083         CBLOCK 0x70
  00000070            00084                 W_TEMP   ; VARIÁVEIS TEMPORÁRIAS
  00000071            00085                 STATUS_TEMP     
  00000072            00086                 FSR_TEMP
  00000073            00087                 PCLATH_TEMP
                      00088         ENDC
                      00089                 
                      00090 ;*      *       *       *       *       *       *       *       *       *
                      00091 ;*                        DEFINICAO DE FLAGS                            *
                      00092 ;*      *       *       *       *       *       *       *       *       *
                      00093 
                      00094 ; AQUI SÃO DEFINIDOS OS FLAGS QUE SERÃO UTILIZADOS PELO SISTEMA
                      00095 
                      00096 #DEFINE  TECLA_0        TECLADO1,0  ; TECLA 0 DO TECLADO MATRICIAL
                      00097 #DEFINE  TECLA_1        TECLADO1,1  ; TECLA 1 DO TECLADO MATRICIAL      
                      00098 #DEFINE  TECLA_2        TECLADO1,2  ; TECLA 2 DO TECLADO MATRICIAL      
                      00099 #DEFINE  TECLA_3        TECLADO1,3  ; TECLA 3 DO TECLADO MATRICIAL
                      00100 #DEFINE  TECLA_4        TECLADO1,4  ; TECLA 4 DO TECLADO MATRICIAL
                      00101 #DEFINE  TECLA_5        TECLADO1,5  ; TECLA 5 DO TECLADO MATRICIAL
                      00102 #DEFINE  TECLA_6        TECLADO1,6  ; TECLA 6 DO TECLADO MATRICIAL
                      00103 #DEFINE  TECLA_7        TECLADO1,7  ; TECLA 7 DO TECLADO MATRICIAL
MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:51:35         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00104 #DEFINE  TECLA_8        TECLADO2,0  ; TECLA 8 DO TECLADO MATRICIAL
                      00105 #DEFINE  TECLA_9        TECLADO2,1  ; TECLA 9 DO TECLADO MATRICIAL
                      00106 #DEFINE  TECLA_C        TECLADO2,2  ; TECLA CORRIGE DO TECLADO MATRICIAL
                      00107 #DEFINE  TECLA_E        TECLADO2,3  ; TECLA ENTER DO TECLADO MATRICIAL
                      00108         
                      00109 ;*      *       *       *       *       *       *       *       *       *
                      00110 ;*                      DEFINICAO DE CONSTANTES                         *
                      00111 ;*      *       *       *       *       *       *       *       *       *
                      00112 
                      00113 ; AQUI SÃO DEFINIDOS AS CONSTANTES QUE SERÃO UTILIZADOS PELO SISTEMA
                      00114 
                      00115 #DEFINE ENDERECO_FLASH  0x800   ; ENDEREÇO PARA ARMAZENAR O BUFFER DO SISTEMA
                      00116 
                      00117 #DEFINE LINHA_SUP       0x80    ; CONSTANTE PARA LINHA SUPERIOR
                      00118 #DEFINE LINHA_INF       0xC0    ; CONSTANTE PARA LINHA INFERIOR
                      00119 #DEFINE TEMPO_BEEP      .10     ; CONSTANTE PARA TOCAR BEEP(MULTIPLOS DE 1ms) 
                      00120 
                      00121 #DEFINE SEL_LINHA1      B'00001110'  ; SELECIONA LINHA 1        
                      00122 #DEFINE SEL_LINHA2      B'00001101'  ; SELECIONA LINHA 2                
                      00123 #DEFINE SEL_LINHA3      B'00001011'  ; SELECIONA LINHA 3                
                      00124 #DEFINE SEL_LINHA4      B'00000111'  ; SELECIONA LINHA 4        
                      00125 
                      00126 ;*      *       *       *       *       *       *       *       *       *
                      00127 ;*                        ENTRADAS DO SISTEMA                           *
                      00128 ;*      *       *       *       *       *       *       *       *       *
                      00129 
                      00130 #DEFINE COL1            PORTA,4      ; PINO DE ENTRADA DA COLUNA1       
                      00131 #DEFINE COL2            PORTA,5      ; PINO DE ENTRADA DA COLUNA2               
                      00132 #DEFINE COL3            PORTE,0      ; PINO DE ENTRADA DA COLUNA3               
                      00133 
                      00134 ;*      *       *       *       *       *       *       *       *       *
                      00135 ;*                        SAÍDAS DO SISTEMA                             *
                      00136 ;*      *       *       *       *       *       *       *       *       *
                      00137 
                      00138 ; AQUI SÃO DEFINIDAS AS SAÍDAS QUE SERÃO UTILIZADOS PELO SISTEMA
                      00139 
                      00140 #DEFINE BUS             PORTD   ; DEFINE O BARRAMENTO COMO O PORTD 
                      00141 #DEFINE RS              PORTE,1 ; RS DO DISPLAY
                      00142 #DEFINE EN              PORTE,2 ; EN DO DISPLAY
                      00143 #DEFINE BEEP            PORTC,5 ; SAÍDA PARA LIGAR O BEEP
                      00144 
                      00145 ;*      *       *       *       *       *       *       *       *       *
                      00146 ;*                      INICIALIZAÇÃO DA EEPROM                         *
                      00147 ;*      *       *       *       *       *       *       *       *       *
                      00148 
0800                  00149         ORG     0x800
0800   0041 0070 0069 00150         DB      0,'A',0,'p',0,'i',0,'c',0,'e',0,' '
       0063 0065 0020 
0806   0054 0065 0063 00151         DB      0,'T',0,'e',0,'c',0,'n',0,'o',0,'l',0,'o',0,'g',0,'i',0,'.'
       006E 006F 006C 
       006F 0067 0069 
       002E 
                      00152         
MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:51:35         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00153 ;*      *       *       *       *       *       *       *       *       *
                      00154 ;*                          VETOR DE RESET                              *
                      00155 ;*      *       *       *       *       *       *       *       *       *
                      00156 
0000                  00157         ORG     0x0000          ; ENDEREÇO INICIAL DA MÁQUINA
0000   28F9           00158         GOTO    CONFIG_         ; SALTA PARA CONFIGURAR A MÁQUINA
                      00159 
                      00160 ;*      *       *       *       *       *       *       *       *       *
                      00161 ;*                       VETOR DE INTERRUPÇÃO                           *
                      00162 ;*      *       *       *       *       *       *       *       *       *
                      00163 
0004                  00164         ORG     0x0004          ; ENDEREÇO INICIAL DO VETOR DE INTERRUPÇÃO
0004                  00165 SALVA_CONTEXTO
0004   00F0           00166         MOVWF   W_TEMP          ; SALVA W
0005   0E03           00167         SWAPF   STATUS,W        
0006   00F1           00168         MOVWF   STATUS_TEMP     ; SALVA STATUS
0007   0804           00169         MOVF    FSR,W
0008   00F2           00170         MOVWF   FSR_TEMP        ; SALVA FSR     
0009   080A           00171         MOVF    PCLATH,W        
000A   00F3           00172         MOVWF   PCLATH_TEMP     ; SALVA PCLATH
                      00173         
000B   0183           00174         CLRF    STATUS          ; GARANTE BANCO 0
000C   018A           00175         CLRF    PCLATH          ; GARANTE PÁGINA 0
                      00176         
000D   1A8C           00177         BTFSC   PIR1,RCIF       ; INTERRUPÇÃO SERIAL?
000E   2853           00178         GOTO    TRATA_SERIAL    ; SIM, ENTÃO TRATA
                      00179         
000F   190B           00180         BTFSC   INTCON,T0IF     ; INTERRUPÇÃO DE TIMER0?
0010   281A           00181         GOTO    TRATA_TIMER0    ; SIM, ENTÃO TRATA
                      00182         
0011                  00183 SAI_INTERRUPCAO 
0011   0872           00184         MOVF    FSR_TEMP,W
0012   0084           00185         MOVWF   FSR             ; RECUPERA FSR
0013   0873           00186         MOVF    PCLATH_TEMP,W   
0014   008A           00187         MOVWF   PCLATH          ; RECUPERA PCLATH
0015   0E71           00188         SWAPF   STATUS_TEMP,W
0016   0083           00189         MOVWF   STATUS          ; RECUPERA STATUS
0017   0EF0           00190         SWAPF   W_TEMP,F
0018   0E70           00191         SWAPF   W_TEMP,W        ; RECUPERA W
0019   0009           00192         RETFIE                  ; RETORNA DA INTERRUPÇÃO
                      00193 
                      00194 ;*      *       *       *       *       *       *       *       *       *
                      00195 ;*                  TRATATAMENTO DE INTERRUPÇÃO DE TIMER0               *
                      00196 ;*      *       *       *       *       *       *       *       *       *
                      00197 
001A                  00198 TRATA_TIMER0
                      00199         
001A   110B           00200         BCF     INTCON,T0IF      ; LIMPA FLAG DE INTERRUPÇÃO
001B   0AA4           00201         INCF    INDICE           ; INCREMENTA INDICE 
001C   3003           00202         MOVLW   B'00000011'      
001D   0524           00203         ANDWF   INDICE,W         ; MASCARA OS BITS SUPERIORES   
001E   0782           00204         ADDWF   PCL,F            ; SOMA CONTEÚDO COM PCL        
001F   2823           00205         GOTO    VERIFICA_LINHA1  ; SALTA PARA TRATAR A LINHA 1
MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:51:35         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0020   282F           00206         GOTO    VERIFICA_LINHA2  ; SALTA PARA TRATAR A LINHA 2
0021   283B           00207         GOTO    VERIFICA_LINHA3  ; SALTA PARA TRATAR A LINHA 3
0022   2847           00208         GOTO    VERIFICA_LINHA4  ; SALTA PARA TRATAR A LINHA 4
                      00209         
                      00210 
0023                  00211 VERIFICA_LINHA1
                      00212         
0023   300E           00213         MOVLW   SEL_LINHA1      
0024   0088           00214         MOVWF   BUS             ; SELECIONA A LINHA 1   
                      00215         
0025   10A2           00216         BCF     TECLA_1         ; LIMPA FLAG DA TECLA 1 PRESSIONADA
0026   1122           00217         BCF     TECLA_2         ; LIMPA FLAG DA TECLA 2 PRESSIONADA
0027   11A2           00218         BCF     TECLA_3         ; LIMPA FLAG DA TECLA 3 PRESSIONADA
                      00219                 
0028   1E05           00220         BTFSS   COL1            ; COLUNA1 ESTÁ PRESSIONADA?
0029   14A2           00221         BSF     TECLA_1         ; SIM, ENTÃO SETA TECLA_1
                      00222         
002A   1E85           00223         BTFSS   COL2            ; COLUNA2 ESTÁ PRESSIONADA?
002B   1522           00224         BSF     TECLA_2         ; SIM, ENTÃO SETA TECLA_2
                      00225         
002C   1C09           00226         BTFSS   COL3            ; COLUNA3 ESTÁ PRESSIONADA?
002D   15A2           00227         BSF     TECLA_3         ; SIM, ENTÃO SETA TECLA_3
                      00228         
002E   2811           00229         GOTO    SAI_INTERRUPCAO ; SAI DA INTERRUPÇÃO
                      00230         
002F                  00231 VERIFICA_LINHA2
                      00232         
002F   300D           00233         MOVLW   SEL_LINHA2
0030   0088           00234         MOVWF   BUS             ; SELECIONA A LINHA 2   
                      00235         
0031   1222           00236         BCF     TECLA_4         ; LIMPA FLAG DA TECLA 4 PRESSIONADA
0032   12A2           00237         BCF     TECLA_5         ; LIMPA FLAG DA TECLA 5 PRESSIONADA
0033   1322           00238         BCF     TECLA_6         ; LIMPA FLAG DA TECLA 6 PRESSIONADA
                      00239                 
0034   1E05           00240         BTFSS   COL1            ; COLUNA1 ESTÁ PRESSIONADA?
0035   1622           00241         BSF     TECLA_4         ; SIM, ENTÃO SETA TECLA_4
                      00242         
0036   1E85           00243         BTFSS   COL2            ; COLUNA2 ESTÁ PRESSIONADA?
0037   16A2           00244         BSF     TECLA_5         ; SIM, ENTÃO SETA TECLA_5
                      00245         
0038   1C09           00246         BTFSS   COL3            ; COLUNA3 ESTÁ PRESSIONADA?
0039   1722           00247         BSF     TECLA_6         ; SIM, ENTÃO SETA TECLA_6
                      00248         
003A   2811           00249         GOTO    SAI_INTERRUPCAO ; SAI DA INTERRUPÇÃO
                      00250 
003B                  00251 VERIFICA_LINHA3
                      00252         
003B   300B           00253         MOVLW   SEL_LINHA3
003C   0088           00254         MOVWF   BUS             ; SELECIONA A LINHA 3   
                      00255         
003D   13A2           00256         BCF     TECLA_7         ; LIMPA FLAG DA TECLA 7 PRESSIONADA
003E   1023           00257         BCF     TECLA_8         ; LIMPA FLAG DA TECLA 8 PRESSIONADA
003F   10A3           00258         BCF     TECLA_9         ; LIMPA FLAG DA TECLA 9 PRESSIONADA
MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:51:35         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00259                 
0040   1E05           00260         BTFSS   COL1            ; COLUNA1 ESTÁ PRESSIONADA?
0041   17A2           00261         BSF     TECLA_7         ; SIM, ENTÃO SETA TECLA_7
                      00262         
0042   1E85           00263         BTFSS   COL2            ; COLUNA2 ESTÁ PRESSIONADA?
0043   1423           00264         BSF     TECLA_8         ; SIM, ENTÃO SETA TECLA_8
                      00265         
0044   1C09           00266         BTFSS   COL3            ; COLUNA3 ESTÁ PRESSIONADA?
0045   14A3           00267         BSF     TECLA_9         ; SIM, ENTÃO SETA TECLA_9
                      00268         
0046   2811           00269         GOTO    SAI_INTERRUPCAO ; SAI DA INTERRUPÇÃO
                      00270 
0047                  00271 VERIFICA_LINHA4
                      00272         
0047   3007           00273         MOVLW   SEL_LINHA4      
0048   0088           00274         MOVWF   BUS             ; SELECIONA A LINHA 4   
                      00275         
0049   11A3           00276         BCF     TECLA_E         ; LIMPA FLAG DA TECLA ENTER PRESSIONADA
004A   1123           00277         BCF     TECLA_C         ; LIMPA FLAG DA TECLA CORRIGE PRESSIONADA
004B   1022           00278         BCF     TECLA_0         ; LIMPA FLAG DA TECLA 0 PRESSIONADA
                      00279                 
004C   1E05           00280         BTFSS   COL1            ; COLUNA1 ESTÁ PRESSIONADA?
004D   1523           00281         BSF     TECLA_C         ; SIM, ENTÃO SETA TECLA_C
                      00282         
004E   1E85           00283         BTFSS   COL2            ; COLUNA2 ESTÁ PRESSIONADA?
004F   1422           00284         BSF     TECLA_0         ; SIM, ENTÃO SETA TECLA_0
                      00285         
0050   1C09           00286         BTFSS   COL3            ; COLUNA3 ESTÁ PRESSIONADA?
0051   15A3           00287         BSF     TECLA_E         ; SIM, ENTÃO SETA TECLA_E
                      00288         
0052   2811           00289         GOTO    SAI_INTERRUPCAO ; SAI DA INTERRUPÇÃO
                      00290 
                      00291 ;*      *       *       *       *       *       *       *       *       *
                      00292 ;*                  TRATATAMENTO DE INTERRUPÇÃO SERIAL                  *
                      00293 ;*      *       *       *       *       *       *       *       *       *
                      00294 
0053                  00295 TRATA_SERIAL
                      00296         
0053   3010           00297         MOVLW   .16             
0054   0636           00298         XORWF   INDICE_BUFFER,W 
0055   1D03           00299         BTFSS   STATUS,Z        ; INDICE_BUFFER CHEGOU A 16?
0056   285A           00300         GOTO    TRATA_SERIAL_A  ; NÃO, ENTÃO SALTA PARA TRATA_SERIAL_A
0057   01B6           00301         CLRF    INDICE_BUFFER   ; SIM, ENTÃO LIMPA O ÍNDICE
0058   3080           00302         MOVLW   0x80            ; MOVE O PONTEIRO DO DISPLAY PARA A 
0059   207D           00303         CALL    ENVIA_COMANDO_INT ; PRIMEIRA LINHA E PRIMEIRA COLUNA
                      00304 
005A                  00305 TRATA_SERIAL_A
                      00306         
005A   3026           00307         MOVLW   BUFFER0         ; PREPARA O PONTEIRO
005B   0736           00308         ADDWF   INDICE_BUFFER,W
005C   0084           00309         MOVWF   FSR
005D   0AB6           00310         INCF    INDICE_BUFFER
                      00311         
MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:51:35         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

005E   081A           00312         MOVF    RCREG,W         
005F   0080           00313         MOVWF   INDF            ; SALVA O DADO NO PONTEIRO
0060   207E           00314         CALL    ENVIA_DADO_INT  ; CHAMA ROTINA PARA ENVIAR O DADO 
                      00315                                 ; O DISPLAY
0061   2811           00316         GOTO    SAI_INTERRUPCAO ; SAI DA INTERRUPÇÃO
                      00317 
                      00318 ;*      *       *       *       *       *       *       *       *       *
                      00319 ;*                        ROTINA PARA TOCAR O BEEP                      *
                      00320 ;*      *       *       *       *       *       *       *       *       *
                      00321 
0062                  00322 TOCA_BEEP
                      00323         
0062   1687           00324         BSF     BEEP            ; LIGA O BEEP
0063   30C8           00325         MOVLW   .200            
0064   2067           00326         CALL    DELAY_MS        ; AGUARDA 200ms
0065   1287           00327         BCF     BEEP            ; DESLIGA O BEEP
0066   0008           00328         RETURN                  ; RETORNA
                      00329                                 
                      00330 ;*      *       *       *       *       *       *       *       *       *
                      00331 ;*                    ROTINA DE DELAY DE 1ms A 256ms                    *
                      00332 ;*      *       *       *       *       *       *       *       *       *
                      00333         
0067                  00334 DELAY_MS
                      00335         
0067   0064           00336         CLRWDT
                      00337         
0068   00A1           00338         MOVWF   TEMPO2          ; SALVA O VALOR MULTIPLICADOR
0069   01A0           00339         CLRF    TEMPO1          ; LIMPA REGISTRADOR
                      00340 
006A                  00341 DELAY_A
                      00342         
006A   0000           00343         NOP                     ; PERDE 1 CICLO DE MÁQUINA
006B   0BA0           00344         DECFSZ  TEMPO1,F        ; DECREMENTA REGISTRADOR, ACABOU?
006C   286A           00345         GOTO    $-2             ; NÃO, ENTÃO RETORNA DUAS POSIÇÕES 
006D   0BA1           00346         DECFSZ  TEMPO2,F
006E   286A           00347         GOTO    DELAY_A
                      00348         
006F   0008           00349         RETURN                  ; RETORNA DA INTERRUPÇÃO
                      00350 
                      00351 ;*      *       *       *       *       *       *       *       *       *
                      00352 ;*                ROTINA PARA ESCREVER DADOS NO DISPLAY                 *
                      00353 ;*      *       *       *       *       *       *       *       *       *
                      00354 
0070                  00355 ENVIA_COMANDO
                      00356         
0070   1089           00357         BCF     RS              ; PÕE EM MODO DE COMANDO
                      00358         
0071                  00359 ENVIA_DADO
                      00360         
0071   138B           00361         BCF     INTCON,GIE      ; DESLIGA A INTERRUPÇÃO
                      00362         
0072   0088           00363         MOVWF   BUS             ; MOVE DADO PARA O PORTD
                      00364                 
MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:51:35         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0073   2874           00365         GOTO    $+1             ; DEÇAY PARA ACOMODAÇÃO
0074   2875           00366         GOTO    $+1             
                      00367         
0075   1509           00368         BSF     EN              ; GERA PULSO DE CLOCK
0076   2877           00369         GOTO    $+1
0077   1109           00370         BCF     EN
                      00371         
0078   1489           00372         BSF     RS              ; VOLTA PARA O MODO DADOS
0079   3001           00373         MOVLW   .1
007A   2067           00374         CALL    DELAY_MS
007B   178B           00375         BSF     INTCON,GIE      ; LIGA A INTERRUPÇÃO
007C   0008           00376         RETURN                  ; RETORNA DA INTERRUPÇÃO
                      00377 
                      00378 ;*      *       *       *       *       *       *       *       *       *
                      00379 ;*         ROTINA PARA ESCREVER DADOS NO DISPLAY PELA INTERRUPÇÃO       *
                      00380 ;*      *       *       *       *       *       *       *       *       *
                      00381 
007D                  00382 ENVIA_COMANDO_INT
                      00383         
007D   1089           00384         BCF     RS              ; PÕE EM MODO DE COMANDO
                      00385         
007E                  00386 ENVIA_DADO_INT
                      00387         
007E   0088           00388         MOVWF   BUS             ; MOVE DADO PARA O PORTD
                      00389                 
007F   2880           00390         GOTO    $+1             ; DELAY PARA ACOMODAÇÃO
0080   2881           00391         GOTO    $+1             
                      00392         
0081   1509           00393         BSF     EN              ; GERA PULSO DE CLOCK
0082   2883           00394         GOTO    $+1
0083   1109           00395         BCF     EN
                      00396         
0084   1489           00397         BSF     RS              ; VOLTA PARA O MODO DADOS
0085   3001           00398         MOVLW   .1
0086   2067           00399         CALL    DELAY_MS
0087   0008           00400         RETURN                  ; RETORNA DA INTERRUPÇÃO
                      00401 
                      00402 ;*      *       *       *       *       *       *       *       *       *
                      00403 ;*                   ROTINA PARA SALVAR O BUFFER NA EEPROM              *
                      00404 ;*      *       *       *       *       *       *       *       *       *
                      00405 
0088                  00406 GUARDA_BUFFER
                      00407         
0088   138B           00408         BCF     INTCON,GIE      ; DESLIGA A INTERRUPÇÃO PARA SALVAR DADOS
                      00409                                 ; NA EEPROM(OBRIGATÓRIO)
                      00410 
0089   2062           00411         CALL    TOCA_BEEP       ; CHAMA ROTINA PARA TOCAR O BEEP        
                      00412                 
008A   3008           00413         MOVLW   HIGH(ENDERECO_FLASH) ; CARREGA O ENDEREÇO DA FLASH      
008B   00B7           00414         MOVWF   ENDERECO_HI          ; PARA SALVAR O DADO       
008C   3000           00415         MOVLW   LOW(ENDERECO_FLASH)
008D   00B8           00416         MOVWF   ENDERECO_LO
                      00417         
MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:51:35         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

008E   3026           00418         MOVLW   BUFFER0         ; MOVE O PONTEIRO PARA SALVAR O CONTEÚDO        
008F   20BF           00419         CALL    ESCREVE_FLASH   ; DE BYTES
                      00420         
0090   302A           00421         MOVLW   BUFFER4         ; MOVE O PONTEIRO PARA SALVAR O CONTEÚDO                
0091   20BF           00422         CALL    ESCREVE_FLASH   ; DE BYTES
                      00423         
0092   302E           00424         MOVLW   BUFFER8         ; MOVE O PONTEIRO PARA SALVAR O CONTEÚDO        
0093   20BF           00425         CALL    ESCREVE_FLASH   ; DE BYTES
                      00426         
0094   3032           00427         MOVLW   BUFFER12        ; MOVE O PONTEIRO PARA SALVAR O CONTEÚDO        
0095   20BF           00428         CALL    ESCREVE_FLASH   ; DE BYTES
                      00429                                 
0096   178B           00430         BSF     INTCON,GIE      ; LIGA A INTERRUPÇÃO
                      00431         
0097   0064           00432         CLRWDT
0098   19A3           00433         BTFSC   TECLA_E         ; AGUARDA SOLTAR A TECLA
0099   2897           00434         GOTO    $-2
009A   2062           00435         CALL    TOCA_BEEP
009B   0008           00436         RETURN                  ; RETORNA DA ROTINA
                      00437 
                      00438 ;*      *       *       *       *       *       *       *       *       *
                      00439 ;*                   ROTINA PARA LER O BUFFER DA EEPROM                 *
                      00440 ;*      *       *       *       *       *       *       *       *       *
                      00441 
009C                  00442 LE_DADOS
                      00443         
009C   3008           00444         MOVLW   HIGH(ENDERECO_FLASH) ; CARREGA ENDEREÇO DA FLASH        
009D   00B7           00445         MOVWF   ENDERECO_HI
009E   3000           00446         MOVLW   LOW(ENDERECO_FLASH)
009F   00B8           00447         MOVWF   ENDERECO_LO
                      00448                 
00A0                  00449 LE_DADOS_A
                      00450 
00A0   20AA           00451         CALL    LE_FLASH        ; CHAMA ROTINA PARA LER A EEPROM        
00A1   2071           00452         CALL    ENVIA_DADO      ; ENVIA O DADO LIDO PARA O DISPLAY
00A2   0AB8           00453         INCF    ENDERECO_LO     ; INCREMENTA O APONTADOR DE ENDEREÇOS
00A3   3010           00454         MOVLW   .16     
00A4   0638           00455         XORWF   ENDERECO_LO,W   ; VERIFICA SE ACABOU DE LER TUDO
00A5   1D03           00456         BTFSS   STATUS,Z
00A6   28A0           00457         GOTO    LE_DADOS_A
                      00458         
00A7   3080           00459         MOVLW   0x80            ; POSICIONA O DISPLAY PARA A PRIMEIRA
00A8   2070           00460         CALL    ENVIA_COMANDO   ; LINHA E PRIMEIRA COLUNA
                      00461                 
00A9   0008           00462         RETURN                  ; RETORNA DA ROTINA     
                      00463 
                      00464  ;*     *       *       *       *       *       *       *       *       *
                      00465 ;*                        ROTINA DE LEITURA DE DADOS                    *
                      00466 ;*      *       *       *       *       *       *       *       *       *
                      00467 
00AA                  00468 LE_FLASH
                      00469         
00AA   0837           00470         MOVF    ENDERECO_HI,W
MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:51:35         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00AB   1283 1703      00471         BANKSEL EEADRH
00AD   008F           00472         MOVWF   EEADRH  
                      00473         
00AE   1283 1303      00474         BANKSEL ENDERECO_LO
00B0   0838           00475         MOVF    ENDERECO_LO,W           ; MOVE O ENDEREÇO DE LEITURA PARA
00B1   1283 1703      00476         BANKSEL EEADR                   ; EEADR
00B3   008D           00477         MOVWF   EEADR
                      00478         
00B4   1683 1703      00479         BANKSEL EECON1
00B6   178C           00480         BSF     EECON1,EEPGD            ; APONTA PARA MEMÓRIA EEPROM
00B7   140C           00481         BSF     EECON1,RD               ; FAZ A LEITURA
00B8   1283 1703      00482         BANKSEL EEDATA          
00BA   080C           00483         MOVF    EEDATA,W                ; MOVE O DADO LIDO PARA DADOS_LO
00BB   1283 1303      00484         BANKSEL DADOS_LO
00BD   00BA           00485         MOVWF   DADOS_LO
                      00486                 
00BE   0008           00487         RETURN                          ; RETORNA
                      00488         
                      00489 ;*      *       *       *       *       *       *       *       *       *
                      00490 ;*                        ROTINA DE ESCRITA DE DADOS                    *
                      00491 ;*      *       *       *       *       *       *       *       *       *
                      00492 
00BF                  00493 ESCREVE_FLASH
                      00494         
00BF   0084           00495         MOVWF   FSR
                      00496         
00C0   0837           00497         MOVF    ENDERECO_HI,W
00C1   1283 1703      00498         BANKSEL EEADRH
00C3   008F           00499         MOVWF   EEADRH
                      00500         
00C4   1283 1303      00501         BANKSEL ENDERECO_LO
00C6   0838           00502         MOVF    ENDERECO_LO,W
00C7   39FC           00503         ANDLW   B'11111100'
00C8   1283 1703      00504         BANKSEL EEADR
00CA   008D           00505         MOVWF   EEADR
                      00506 
00CB                  00507 ESCREVE_FLASH_A
                      00508         
00CB   1283 1703      00509         BANKSEL EEDATA
00CD   0800           00510         MOVF    INDF,W
00CE   008C           00511         MOVWF   EEDATA
00CF   018E           00512         CLRF    EEDATH
00D0   0A84           00513         INCF    FSR,F   
00D1   1683 1703      00514         BANKSEL EECON1
00D3   178C           00515         BSF     EECON1,EEPGD            ; APONTA PARA MEMÓRIA EEPROM
00D4   150C           00516         BSF     EECON1,WREN             ; HABILITA A ESCRITA DE DADOS
00D5   3055           00517         MOVLW   0x55    
00D6   008D           00518         MOVWF   EECON2  
00D7   30AA           00519         MOVLW   0xAA            
00D8   008D           00520         MOVWF   EECON2                  
00D9   148C           00521         BSF     EECON1,WR               ; HABILITA A ESCRITA
00DA   0000           00522         NOP
00DB   0000           00523         NOP
MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:51:35         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00DC   110C           00524         BCF     EECON1,WREN             ; DESABILITA A ESCRITA
00DD   1283 1703      00525         BANKSEL EEADR
00DF   0A8D           00526         INCF    EEADR,F
                      00527         
00E0   3003           00528         MOVLW   B'00000011'
00E1   050D           00529         ANDWF   EEADR,W
00E2   1D03           00530         BTFSS   STATUS,Z
00E3   28CB           00531         GOTO    ESCREVE_FLASH_A
                      00532         
00E4   1683 1703      00533         BANKSEL EECON1
00E6   188C           00534         BTFSC   EECON1,WR
00E7   28E6           00535         GOTO    $-1
00E8   1283 1303      00536         BANKSEL ENDERECO_LO
                      00537         
00EA   3004           00538         MOVLW   .4
00EB   07B8           00539         ADDWF   ENDERECO_LO,F           ; PREPARA PARA LER O PRÓXIMO BLOCO
00EC   1803           00540         BTFSC   STATUS,C
00ED   0AB7           00541         INCF    ENDERECO_HI     
                      00542         
00EE   0008           00543         RETURN                          ; RETORNA 
                      00544 
                      00545 ;*      *       *       *       *       *       *       *       *       *
                      00546 ;*             ROTINA PARA RECUPERAR O DADO SALVO NA EEPROM             *
                      00547 ;*      *       *       *       *       *       *       *       *       *
                      00548 
00EF                  00549 RECUPERA_EEPROM
                      00550 
00EF   2062           00551         CALL    TOCA_BEEP
00F0   3080           00552         MOVLW   0x80
00F1   2070           00553         CALL    ENVIA_COMANDO
00F2   01B8           00554         CLRF    ENDERECO_LO
00F3   209C           00555         CALL    LE_DADOS
                      00556         
00F4   0064           00557         CLRWDT
00F5   1923           00558         BTFSC   TECLA_C
00F6   28F4           00559         GOTO    $-2
                      00560         
00F7   2062           00561         CALL    TOCA_BEEP
00F8   0008           00562         RETURN
                      00563                         
                      00564 ;*      *       *       *       *       *       *       *       *       *
                      00565 ;*                        CONFIGURACOES INICIAIS                        *
                      00566 ;*      *       *       *       *       *       *       *       *       *
                      00567 
00F9                  00568 CONFIG_
                      00569 
00F9   0185           00570         CLRF    PORTA           ; LIMPA O PORTA
00FA   0186           00571         CLRF    PORTB           ; LIMPA O PORTB
00FB   0187           00572         CLRF    PORTC           ; LIMPA O PORTC
00FC   0188           00573         CLRF    PORTD           ; LIMPA O PORTD
00FD   0189           00574         CLRF    PORTE           ; LIMPA O PORTE
                      00575         
00FE   1683           00576         BANK1                   ; SELECIONA BANCO1 DE MEMÓRIA
MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:51:35         PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00577         
00FF   30FF           00578         MOVLW   B'11111111'
0100   0085           00579         MOVWF   TRISA
                      00580         
0101   30C0           00581         MOVLW   B'11000000'
0102   0086           00582         MOVWF   TRISB           ; CONFIGURA I/O DO PORTB
                      00583         
0103   30DF           00584         MOVLW   B'11011111'
0104   0087           00585         MOVWF   TRISC           ; CONFIGURA I/O DO PORTB
                      00586         
0105   3000           00587         MOVLW   B'00000000'     ; CONFIGURA TODOS OS PINOS DESTE
0106   0088           00588         MOVWF   TRISD           ; PORTB COMO SAÍDA
                      00589         
0107   3001           00590         MOVLW   B'00000001'
0108   0089           00591         MOVWF   TRISE           ; CONFIGURA I/O DO PORTE
                      00592         
0109   308F           00593         MOVLW   B'10001111'     ; DESLIGA PULL-UPS
010A   0081           00594         MOVWF   OPTION_REG      ; WDT 1:128
                      00595         
010B   3020           00596         MOVLW   B'00100000'
010C   008C           00597         MOVWF   PIE1            ; HABILITA A INTERUPÇÃO SERIAL
                      00598         
010D   3060           00599         MOVLW   B'01100000'     
010E   008B           00600         MOVWF   INTCON          ; HABILITA A INTERRUPÇÃO DE TIMER 0
                      00601                                 ; LIGA A CHAVE GERAL DE INTERRUPÇÃO
                      00602         
010F   3007           00603         MOVLW   B'00000111'     ; DESLIGA OS A/D´S
0110   009F           00604         MOVWF   ADCON1
                      00605         
0111   3019           00606         MOVLW   .25
0112   0099           00607         MOVWF   SPBRG           ; PREPARA PARA FUNCIONAR A 9600bps
                      00608         
0113   3024           00609         MOVLW   B'00100100'
0114   0098           00610         MOVWF   TXSTA           ; CONFIGURA USART
                      00611         
0115   1283           00612         BANK0
                      00613         
0116   3090           00614         MOVLW   B'10010000'
0117   0098           00615         MOVWF   RCSTA           ; CONFIGURA USART
                      00616         
0118   1A03           00617         BTFSC   STATUS,NOT_TO   ; ESTOURO POR WDT?
0119   2919           00618         GOTO    $               ; NÃO, ENTÃO AGUARDA
                      00619                 
011A                  00620 LIMPEZA_DA_RAM
                      00621                                 ; ROTINA DE LIMPEZA DA RAM
                      00622                                 
011A   3020           00623         MOVLW   0x20
011B   0084           00624         MOVWF   FSR
011C   0180           00625         CLRF    INDF
011D   0A84           00626         INCF    FSR,F
011E   3080           00627         MOVLW   0x80
011F   0604           00628         XORWF   FSR,W
0120   1D03           00629         BTFSS   STATUS,Z
MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:51:35         PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0121   291C           00630         GOTO    $-5
                      00631 
0122   178B           00632         BSF     INTCON,GIE      ; LIGA AS INTERRUPÇÕES
                      00633         
                      00634 ;*      *       *       *       *       *       *       *       *       *
                      00635 ;*                       INICIALIZAÇÃO DO DISPLAY                       *
                      00636 ;*      *       *       *       *       *       *       *       *       *
                      00637         
0123   3030           00638         MOVLW   0x30                    
0124   2070           00639         CALL    ENVIA_COMANDO           ; COMANDO DE INICIALIZAÇÃO
                      00640         
0125   3003           00641         MOVLW   .3                      
0126   2067           00642         CALL    DELAY_MS                ; DELAY DE 3ms
                      00643         
0127   3030           00644         MOVLW   0x30                    
0128   2070           00645         CALL    ENVIA_COMANDO           ; COMANDO DE INICIALIZAÇÃO      
                      00646         
0129   3030           00647         MOVLW   0x30                    
012A   2070           00648         CALL    ENVIA_COMANDO           ; COMANDO DE INICIALIZAÇÃO
                      00649         
012B   3038           00650         MOVLW   0x38                    
012C   2070           00651         CALL    ENVIA_COMANDO           ; INTERFACE DE 8 VIAS
                      00652         
012D   3001           00653         MOVLW   0x01                    
012E   2070           00654         CALL    ENVIA_COMANDO           ; LIMPA O DISPLAY
                      00655         
012F   3001           00656         MOVLW   .1
0130   2067           00657         CALL    DELAY_MS                ; CHAMA DELAY DE 3ms
                      00658         
0131   300C           00659         MOVLW   0x0C                    
0132   2070           00660         CALL    ENVIA_COMANDO           ; LIGAR O DISPLAY SEM CURSOR
                      00661         
0133   3006           00662         MOVLW   0x06                    
0134   2070           00663         CALL    ENVIA_COMANDO           ; LIGAR O DISPLAY SEM CURSOR
                      00664         
                      00665                                                                 
                      00666 ;*      *       *       *       *       *       *       *       *       *
                      00667 ;*                       INICIALIZAÇÃO DAS VARIÁVEIS                    *
                      00668 ;*      *       *       *       *       *       *       *       *       *
                      00669         
0135   209C           00670         CALL    LE_DADOS                ; CHAMA ROTINA PARA CARREGAR O
                      00671                                         ; ÚLTIMO DADO SALVA NA EEPROM 
                      00672         
                      00673 ;*      *       *       *       *       *       *       *       *       *
                      00674 ;*                          ROTINA PRINCIPAL                            *
                      00675 ;*      *       *       *       *       *       *       *       *       *
                      00676 
0136                  00677 LOOP
0136   0064           00678         CLRWDT                  ; LIMPA O WATCHDOG
                      00679         
0137   1923           00680         BTFSC   TECLA_C         ; A TECLA ESTÁ PRESSIONADA?
0138   20EF           00681         CALL    RECUPERA_EEPROM ; SIM, ENTÃO RECUPERA OS DADOS DA EEPROM
                      00682 
MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:51:35         PAGE 14


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0139   19A3           00683         BTFSC   TECLA_E         ; A TECLA ESTÁ PRESSIONADA?
013A   2088           00684         CALL    GUARDA_BUFFER   ; CHAMA ROTINA PARA SALVAR O BUFFER
013B   2936           00685         GOTO    LOOP            ; NÃO, ENTÃO VOLTA PARA LOOP
                      00686                         
                      00687 ;*      *       *       *       *       *       *       *       *       *
                      00688 ;*                           FIM DO PROGRAMA                            *
                      00689 ;*      *       *       *       *       *       *       *       *       *
                      00690 
                      00691 
                      00692         END                     ; FIM DO PROGRAMA
MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:51:35         PAGE 15


SYMBOL TABLE
  LABEL                             VALUE 

ACKDT                             00000005
ACKEN                             00000004
ACKSTAT                           00000006
ADCON0                            0000001F
ADCON1                            0000009F
ADCS0                             00000006
ADCS1                             00000007
ADDEN                             00000003
ADFM                              00000007
ADIE                              00000006
ADIF                              00000006
ADON                              00000000
ADRESH                            0000001E
ADRESL                            0000009E
BANK0                             BCF     STATUS,RP0
BANK1                             BSF     STATUS,RP0
BCLIE                             00000003
BCLIF                             00000003
BEEP                              PORTC,5
BF                                00000000
BRGH                              00000002
BUFFER0                           00000026
BUFFER1                           00000027
BUFFER10                          00000030
BUFFER11                          00000031
BUFFER12                          00000032
BUFFER13                          00000033
BUFFER14                          00000034
BUFFER15                          00000035
BUFFER2                           00000028
BUFFER3                           00000029
BUFFER4                           0000002A
BUFFER5                           0000002B
BUFFER6                           0000002C
BUFFER7                           0000002D
BUFFER8                           0000002E
BUFFER9                           0000002F
BUS                               PORTD
C                                 00000000
CCP1CON                           00000017
CCP1IE                            00000002
CCP1IF                            00000002
CCP1M0                            00000000
CCP1M1                            00000001
CCP1M2                            00000002
CCP1M3                            00000003
CCP1X                             00000005
CCP1Y                             00000004
CCP2CON                           0000001D
CCP2IE                            00000000
CCP2IF                            00000000
CCP2M0                            00000000
CCP2M1                            00000001
MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:51:35         PAGE 16


SYMBOL TABLE
  LABEL                             VALUE 

CCP2M2                            00000002
CCP2M3                            00000003
CCP2X                             00000005
CCP2Y                             00000004
CCPR1H                            00000016
CCPR1L                            00000015
CCPR2H                            0000001C
CCPR2L                            0000001B
CHS0                              00000003
CHS1                              00000004
CHS2                              00000005
CKE                               00000006
CKP                               00000004
COL1                              PORTA,4
COL2                              PORTA,5
COL3                              PORTE,0
CONFIG_                           000000F9
CREN                              00000004
CSRC                              00000007
D                                 00000005
DADOS_HI                          00000039
DADOS_LO                          0000003A
DATA_ADDRESS                      00000005
DC                                00000001
DELAY_A                           0000006A
DELAY_MS                          00000067
D_A                               00000005
EEADR                             0000010D
EEADRH                            0000010F
EECON1                            0000018C
EECON2                            0000018D
EEDATA                            0000010C
EEDATH                            0000010E
EEIE                              00000004
EEIF                              00000004
EEPGD                             00000007
EN                                PORTE,2
ENDERECO_FLASH                    0x800
ENDERECO_HI                       00000037
ENDERECO_LO                       00000038
ENVIA_COMANDO                     00000070
ENVIA_COMANDO_INT                 0000007D
ENVIA_DADO                        00000071
ENVIA_DADO_INT                    0000007E
ESCREVE_FLASH                     000000BF
ESCREVE_FLASH_A                   000000CB
F                                 00000001
FERR                              00000002
FSR                               00000004
FSR_TEMP                          00000072
GCEN                              00000007
GIE                               00000007
GO                                00000002
MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:51:35         PAGE 17


SYMBOL TABLE
  LABEL                             VALUE 

GO_DONE                           00000002
GUARDA_BUFFER                     00000088
I2C_DATA                          00000005
I2C_READ                          00000002
I2C_START                         00000003
I2C_STOP                          00000004
IBF                               00000007
IBOV                              00000005
INDF                              00000000
INDICE                            00000024
INDICE_BUFFER                     00000036
INTCON                            0000000B
INTE                              00000004
INTEDG                            00000006
INTF                              00000001
IRP                               00000007
LE_DADOS                          0000009C
LE_DADOS_A                        000000A0
LE_FLASH                          000000AA
LIMPEZA_DA_RAM                    0000011A
LINHA_INF                         0xC0
LINHA_SUP                         0x80
LOOP                              00000136
NOT_A                             00000005
NOT_ADDRESS                       00000005
NOT_BO                            00000000
NOT_BOR                           00000000
NOT_DONE                          00000002
NOT_PD                            00000003
NOT_POR                           00000001
NOT_RBPU                          00000007
NOT_RC8                           00000006
NOT_T1SYNC                        00000002
NOT_TO                            00000004
NOT_TX8                           00000006
NOT_W                             00000002
NOT_WRITE                         00000002
OBF                               00000006
OERR                              00000001
OPTION_REG                        00000081
P                                 00000004
PCFG0                             00000000
PCFG1                             00000001
PCFG2                             00000002
PCFG3                             00000003
PCL                               00000002
PCLATH                            0000000A
PCLATH_TEMP                       00000073
PCON                              0000008E
PEIE                              00000006
PEN                               00000002
PIE1                              0000008C
PIE2                              0000008D
MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:51:35         PAGE 18


SYMBOL TABLE
  LABEL                             VALUE 

PIR1                              0000000C
PIR2                              0000000D
PORTA                             00000005
PORTB                             00000006
PORTC                             00000007
PORTD                             00000008
PORTE                             00000009
PR2                               00000092
PS0                               00000000
PS1                               00000001
PS2                               00000002
PSA                               00000003
PSPIE                             00000007
PSPIF                             00000007
PSPMODE                           00000004
R                                 00000002
RBIE                              00000003
RBIF                              00000000
RC8_9                             00000006
RC9                               00000006
RCD8                              00000000
RCEN                              00000003
RCIE                              00000005
RCIF                              00000005
RCREG                             0000001A
RCSTA                             00000018
RD                                00000000
READ_WRITE                        00000002
RECUPERA_EEPROM                   000000EF
RP0                               00000005
RP1                               00000006
RS                                PORTE,1
RSEN                              00000001
RX9                               00000006
RX9D                              00000000
R_W                               00000002
S                                 00000003
SAI_INTERRUPCAO                   00000011
SALVA_CONTEXTO                    00000004
SEL_LINHA1                        B'00001110'
SEL_LINHA2                        B'00001101'
SEL_LINHA3                        B'00001011'
SEL_LINHA4                        B'00000111'
SEN                               00000000
SMP                               00000007
SPBRG                             00000099
SPEN                              00000007
SREN                              00000005
SSPADD                            00000093
SSPBUF                            00000013
SSPCON                            00000014
SSPCON2                           00000091
SSPEN                             00000005
MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:51:35         PAGE 19


SYMBOL TABLE
  LABEL                             VALUE 

SSPIE                             00000003
SSPIF                             00000003
SSPM0                             00000000
SSPM1                             00000001
SSPM2                             00000002
SSPM3                             00000003
SSPOV                             00000006
SSPSTAT                           00000094
STATUS                            00000003
STATUS_TEMP                       00000071
SYNC                              00000004
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
T1CKPS0                           00000004
T1CKPS1                           00000005
T1CON                             00000010
T1INSYNC                          00000002
T1OSCEN                           00000003
T1SYNC                            00000002
T2CKPS0                           00000000
T2CKPS1                           00000001
T2CON                             00000012
TECLADO1                          00000022
TECLADO2                          00000023
TECLA_0                           TECLADO1,0
TECLA_1                           TECLADO1,1
TECLA_2                           TECLADO1,2
TECLA_3                           TECLADO1,3
TECLA_4                           TECLADO1,4
TECLA_5                           TECLADO1,5
TECLA_6                           TECLADO1,6
TECLA_7                           TECLADO1,7
TECLA_8                           TECLADO2,0
TECLA_9                           TECLADO2,1
TECLA_C                           TECLADO2,2
TECLA_E                           TECLADO2,3
TEMP                              00000025
TEMPO1                            00000020
TEMPO2                            00000021
TEMPO_BEEP                        .10
TMR0                              00000001
TMR1CS                            00000001
TMR1H                             0000000F
TMR1IE                            00000000
TMR1IF                            00000000
TMR1L                             0000000E
TMR1ON                            00000000
TMR2                              00000011
TMR2IE                            00000001
TMR2IF                            00000001
TMR2ON                            00000002
MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:51:35         PAGE 20


SYMBOL TABLE
  LABEL                             VALUE 

TOCA_BEEP                         00000062
TOUTPS0                           00000003
TOUTPS1                           00000004
TOUTPS2                           00000005
TOUTPS3                           00000006
TRATA_SERIAL                      00000053
TRATA_SERIAL_A                    0000005A
TRATA_TIMER0                      0000001A
TRISA                             00000085
TRISB                             00000086
TRISC                             00000087
TRISD                             00000088
TRISE                             00000089
TRISE0                            00000000
TRISE1                            00000001
TRISE2                            00000002
TRMT                              00000001
TX8_9                             00000006
TX9                               00000006
TX9D                              00000000
TXD8                              00000000
TXEN                              00000005
TXIE                              00000004
TXIF                              00000004
TXREG                             00000019
TXSTA                             00000098
UA                                00000001
VERIFICA_LINHA1                   00000023
VERIFICA_LINHA2                   0000002F
VERIFICA_LINHA3                   0000003B
VERIFICA_LINHA4                   00000047
W                                 00000000
WCOL                              00000007
WR                                00000001
WREN                              00000002
WRERR                             00000003
W_TEMP                            00000070
Z                                 00000002
_BODEN_OFF                        00003FBF
_BODEN_ON                         00003FFF
_CPD_OFF                          00003FFF
_CPD_ON                           00003EFF
_CP_ALL                           00000FCF
_CP_HALF                          00001FDF
_CP_OFF                           00003FFF
_CP_UPPER_256                     00002FEF
_DEBUG_OFF                        00003FFF
_DEBUG_ON                         000037FF
_HS_OSC                           00003FFE
_LP_OSC                           00003FFC
_LVP_OFF                          00003F7F
_LVP_ON                           00003FFF
_PWRTE_OFF                        00003FFF
MPASM 03.80.04 Internal                               MEM.ASM   5-15-2005  17:51:35         PAGE 21


SYMBOL TABLE
  LABEL                             VALUE 

_PWRTE_ON                         00003FF7
_RC_OSC                           00003FFF
_WDT_OFF                          00003FFB
_WDT_ON                           00003FFF
_WRT_ENABLE_OFF                   00003DFF
_WRT_ENABLE_ON                    00003FFF
_XT_OSC                           00003FFD
__16F877                          00000001


MEMORY USAGE MAP ('X' = Used,  '-' = Unused)

0000 : X---XXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0040 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0080 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
00C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0100 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXX----
0800 : XXXXXXXXXXXXXXXX ---------------- ---------------- ----------------
2000 : -------X-------- ---------------- ---------------- ----------------

All other memory blocks unused.

Program Memory Words Used:   329
Program Memory Words Free:  7863


Errors   :     0
Warnings :     0 reported,     0 suppressed
Messages :     0 reported,    32 suppressed

